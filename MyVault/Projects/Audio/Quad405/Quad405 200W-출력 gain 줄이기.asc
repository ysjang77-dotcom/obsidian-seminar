Version 4.1
SHEET 1 2632 1204
WIRE 80 -432 -240 -432
WIRE 272 -432 80 -432
WIRE 384 -432 272 -432
WIRE 576 -432 384 -432
WIRE 800 -432 576 -432
WIRE 1008 -432 800 -432
WIRE 1136 -432 1008 -432
WIRE 1520 -432 1136 -432
WIRE 2208 -432 1520 -432
WIRE 1520 -416 1520 -432
WIRE 1136 -400 1136 -432
WIRE 80 -352 80 -432
WIRE 272 -352 272 -432
WIRE 384 -352 384 -432
WIRE 576 -352 576 -432
WIRE 1008 -352 1008 -432
WIRE 800 -336 800 -432
WIRE 1136 -304 1136 -320
WIRE 1136 -304 1072 -304
WIRE 1184 -304 1136 -304
WIRE 1280 -304 1264 -304
WIRE 1392 -304 1280 -304
WIRE 1520 -304 1520 -336
WIRE 1520 -304 1392 -304
WIRE 1392 -272 1392 -304
WIRE 800 -224 800 -256
WIRE 1008 -224 1008 -256
WIRE 1008 -224 800 -224
WIRE 1328 -224 1008 -224
WIRE -240 -208 -240 -432
WIRE -240 -208 -336 -208
WIRE 384 -208 384 -272
WIRE 1136 -208 1136 -304
WIRE 1520 -208 1520 -304
WIRE 1520 -208 1488 -208
WIRE 1568 -208 1520 -208
WIRE 800 -192 800 -224
WIRE 1280 -192 1280 -304
WIRE 80 -160 80 -288
WIRE 272 -160 272 -272
WIRE 272 -160 80 -160
WIRE 320 -160 272 -160
WIRE 576 -144 576 -272
WIRE 736 -144 576 -144
WIRE -240 -128 -336 -128
WIRE 576 -128 576 -144
WIRE 1520 -128 1488 -128
WIRE 1568 -128 1520 -128
WIRE 1136 -96 1136 -128
WIRE 1280 -96 1280 -128
WIRE 1280 -96 1136 -96
WIRE 384 -80 384 -112
WIRE 512 -80 384 -80
WIRE 2208 -80 2208 -432
WIRE 272 -64 272 -160
WIRE 2208 -64 2208 -80
WIRE 576 -16 576 -32
WIRE 800 -16 800 -96
WIRE 800 -16 576 -16
WIRE 848 -16 800 -16
WIRE 976 -16 912 -16
WIRE -240 0 -240 -128
WIRE -176 0 -240 0
WIRE -64 0 -112 0
WIRE -64 64 -64 0
WIRE 384 64 384 -80
WIRE 432 64 384 64
WIRE 976 64 976 -16
WIRE 976 64 496 64
WIRE 1392 64 1392 -176
WIRE 1392 64 976 64
WIRE 1584 64 1392 64
WIRE 272 80 272 16
WIRE 800 80 800 -16
WIRE 1392 96 1392 64
WIRE 1136 112 1136 -96
WIRE -240 128 -240 0
WIRE -208 128 -240 128
WIRE -112 128 -144 128
WIRE 800 192 800 160
WIRE 1392 192 1392 160
WIRE -112 208 -112 128
WIRE 1584 208 1584 64
WIRE 384 224 384 64
WIRE 384 224 336 224
WIRE 432 224 384 224
WIRE 2064 224 2032 224
WIRE 432 272 432 224
WIRE 336 288 336 224
WIRE 1520 288 1520 -128
WIRE 1584 320 1584 288
WIRE 1856 320 1584 320
WIRE 2032 320 2032 224
WIRE 2032 320 1856 320
WIRE 2080 320 2032 320
WIRE 2208 320 2208 0
WIRE 2208 320 2160 320
WIRE 2320 320 2208 320
WIRE 1392 336 1200 336
WIRE 1456 336 1392 336
WIRE -336 352 -384 352
WIRE -160 352 -256 352
WIRE -64 352 -96 352
WIRE 1856 352 1856 320
WIRE 2320 368 2320 320
WIRE 336 400 336 352
WIRE 384 400 336 400
WIRE 432 400 432 352
WIRE 432 400 384 400
WIRE -880 416 -912 416
WIRE -736 416 -880 416
WIRE -688 416 -736 416
WIRE -608 416 -624 416
WIRE -480 416 -528 416
WIRE -384 416 -384 352
WIRE -384 416 -480 416
WIRE 384 416 384 400
WIRE -480 432 -480 416
WIRE -240 432 -240 128
WIRE 1584 432 1584 320
WIRE 1584 432 704 432
WIRE -384 448 -384 416
WIRE -272 448 -384 448
WIRE 560 448 512 448
WIRE 672 448 640 448
WIRE 1584 448 1584 432
WIRE -64 464 -64 352
WIRE -64 464 -208 464
WIRE 32 464 -64 464
WIRE 192 464 112 464
WIRE 320 464 192 464
WIRE 1856 464 1856 416
WIRE -880 480 -880 416
WIRE -272 480 -352 480
WIRE -736 512 -736 416
WIRE -352 512 -352 480
WIRE -480 528 -480 512
WIRE -416 528 -480 528
WIRE 192 544 192 464
WIRE 384 544 384 512
WIRE 512 544 512 448
WIRE 512 544 384 544
WIRE 560 544 512 544
WIRE 672 544 672 448
WIRE 672 544 640 544
WIRE 800 544 672 544
WIRE 928 544 800 544
WIRE 1136 544 1136 192
WIRE 1136 544 928 544
WIRE 1520 544 1520 384
WIRE 1520 544 1136 544
WIRE 1584 544 1584 528
WIRE 1584 544 1520 544
WIRE 384 560 384 544
WIRE 928 560 928 544
WIRE -480 576 -480 528
WIRE 800 592 800 544
WIRE -880 608 -880 560
WIRE 1856 608 1856 544
WIRE 928 640 864 640
WIRE 944 640 928 640
WIRE 1040 640 1024 640
WIRE 1328 640 1040 640
WIRE 1440 640 1328 640
WIRE 1520 640 1520 624
WIRE 1520 640 1440 640
WIRE -352 656 -352 592
WIRE 384 656 384 640
WIRE -736 672 -736 592
WIRE -416 672 -416 528
WIRE 928 672 928 640
WIRE 1040 688 1040 640
WIRE 1440 688 1440 640
WIRE 1520 688 1520 640
WIRE 192 704 192 608
WIRE 2208 704 2208 320
WIRE -480 736 -480 640
WIRE 672 736 672 544
WIRE 1328 752 1328 640
WIRE 928 768 928 752
WIRE 1040 768 1040 752
WIRE 1040 768 928 768
WIRE 800 800 800 688
WIRE 1104 800 800 800
WIRE 1200 800 1200 336
WIRE 1200 800 1104 800
WIRE 1264 800 1200 800
WIRE 1440 800 1440 768
WIRE 1520 800 1520 768
WIRE 1520 800 1440 800
WIRE -416 832 -416 752
WIRE 704 832 704 432
WIRE 704 832 -416 832
WIRE -240 864 -240 496
WIRE -48 864 -240 864
WIRE 1328 880 1328 848
WIRE 1360 880 1328 880
WIRE 1520 880 1520 800
WIRE 1520 880 1424 880
WIRE 1520 896 1520 880
WIRE -240 912 -240 864
WIRE -160 912 -240 912
WIRE 672 912 672 800
WIRE 1104 912 1104 880
WIRE 1104 912 672 912
WIRE 1200 912 1200 880
WIRE 1200 912 1104 912
WIRE 928 944 928 768
WIRE 1104 944 1104 912
WIRE 1200 944 1200 912
WIRE 1328 944 1328 880
WIRE 1456 944 1328 944
WIRE -240 960 -240 912
WIRE -240 960 -288 960
WIRE 1328 960 1328 944
WIRE -96 976 -96 912
WIRE -48 976 -48 928
WIRE -240 1040 -288 1040
WIRE -240 1072 -240 1040
WIRE 928 1072 928 1024
WIRE 928 1072 -240 1072
WIRE 1104 1072 1104 1024
WIRE 1104 1072 928 1072
WIRE 1200 1072 1200 1024
WIRE 1200 1072 1104 1072
WIRE 1328 1072 1328 1040
WIRE 1328 1072 1200 1072
WIRE 1520 1072 1520 992
WIRE 1520 1072 1328 1072
WIRE 2208 1072 2208 784
WIRE 2208 1072 1520 1072
FLAG 2320 368 0
FLAG -736 672 0
FLAG -880 608 0
FLAG 2064 224 Out
IOPIN 2064 224 Out
FLAG -912 416 In
IOPIN -912 416 In
FLAG 384 656 0
FLAG 192 704 0
FLAG 1856 608 0
FLAG -48 976 0
FLAG -96 976 0
FLAG -64 64 0
FLAG 272 80 0
FLAG 800 192 0
FLAG -112 208 0
FLAG -480 736 0
FLAG -352 656 0
DATAFLAG -240 592 ""
DATAFLAG 2208 -256 ""
DATAFLAG 2208 880 ""
DATAFLAG 688 -432 ""
DATAFLAG 32 -432 ""
DATAFLAG -240 160 ""
DATAFLAG -128 464 ""
DATAFLAG 2032 320 ""
DATAFLAG 448 544 ""
DATAFLAG 256 464 ""
DATAFLAG 384 128 ""
DATAFLAG 304 -160 ""
DATAFLAG 464 -80 ""
DATAFLAG 656 -144 ""
DATAFLAG 1104 -304 ""
DATAFLAG 1312 -224 ""
DATAFLAG 1424 336 ""
DATAFLAG 1440 944 ""
DATAFLAG 896 640 ""
DATAFLAG 1232 800 ""
SYMBOL res -752 496 R0
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL res -512 400 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 60k
SYMBOL res 2176 304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R50
SYMATTR Value 8
SYMBOL voltage 2208 -96 R0
SYMATTR InstName V1
SYMATTR Value 25
SYMBOL voltage 2208 688 R0
SYMATTR InstName V2
SYMATTR Value 25
SYMBOL voltage -880 464 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 0
WINDOW 3 -191 113 Invisible 2
SYMATTR Value SINE(0 0.78 1000)
SYMATTR InstName V3
SYMBOL pnp 512 -32 M180
SYMATTR InstName Tr3
SYMATTR Value BC640
SYMBOL npn 320 416 R0
SYMATTR InstName Tr2
SYMATTR Value MJE340
SYMBOL cap -96 336 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 47n
SYMBOL cap -624 400 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 1000n
SYMBOL res -496 416 R0
SYMATTR InstName R3
SYMATTR Value 33k
SYMBOL cap -496 576 R0
SYMATTR InstName C2
SYMATTR Value 100000n
SYMATTR SpiceLine Rser=0.1
SYMBOL res -240 336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 330k
SYMBOL res 128 448 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 3.3k
SYMBOL cap 64 -352 R0
SYMATTR InstName C7
SYMATTR Value 100000n
SYMBOL res 256 -368 R0
SYMATTR InstName R12
SYMATTR Value 560
SYMBOL pnp 320 -112 M180
SYMATTR InstName Tr1
SYMATTR Value BC640
SYMBOL res 368 -368 R0
SYMATTR InstName R18
SYMATTR Value 100
SYMBOL res 256 -80 R0
SYMATTR InstName R113
SYMATTR Value 22k
SYMBOL res 560 -368 R0
SYMATTR InstName R19
SYMATTR Value 3.3k
SYMBOL pnp 736 -96 M180
SYMATTR InstName Tr4
SYMATTR Value BC640
SYMBOL pnp 1072 -256 R180
SYMATTR InstName Tr5
SYMATTR Value BC212
SYMBOL res 784 -352 R0
SYMATTR InstName R20
SYMATTR Value 330
SYMBOL res 1120 -224 R0
SYMATTR InstName R24
SYMATTR Value 22
SYMBOL res 1280 -320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R23
SYMATTR Value 330
SYMBOL res 1504 -432 R0
SYMATTR InstName R32
SYMATTR Value 0.1
SYMBOL pnp 1328 -176 M180
SYMATTR InstName Tr7
SYMATTR Value MJE15031
SYMBOL ind 1568 432 R0
SYMATTR InstName L2
SYMATTR Value 6200n
SYMATTR SpiceLine Rser=0.1
SYMBOL zener -112 -16 R90
WINDOW 0 -4 32 VBottom 2
WINDOW 3 36 32 VTop 2
SYMATTR InstName D1
SYMATTR Value BZX15
SYMBOL diode 1264 -192 R0
SYMATTR InstName D3
SYMATTR Value D1N4148
SYMBOL cap 848 0 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C10
SYMATTR Value 330
SYMBOL res 784 64 R0
SYMATTR InstName R21
SYMATTR Value 1.2k
SYMBOL cap 496 48 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C9
SYMATTR Value 120p
SYMBOL res -256 -224 R0
SYMATTR InstName R8
SYMATTR Value 8.2k
SYMBOL cap 320 288 R0
SYMATTR InstName C6
SYMATTR Value 330
SYMBOL res 416 256 R0
SYMATTR InstName R14
SYMATTR Value 3.3K
SYMBOL cap 176 544 R0
SYMATTR InstName C8
SYMATTR Value 1n
SYMBOL res 368 544 R0
SYMATTR InstName R15
SYMATTR Value 180
SYMBOL res 656 432 R90
WINDOW 0 -8 86 VBottom 2
WINDOW 3 -38 22 VTop 2
SYMATTR InstName R16
SYMATTR Value 1k
SYMBOL res 656 528 R90
WINDOW 0 62 78 VBottom 2
WINDOW 3 36 14 VTop 2
SYMATTR InstName R17
SYMATTR Value 1k
SYMBOL pnp 864 688 R180
SYMATTR InstName Tr6
SYMATTR Value BC212
SYMBOL res 1040 624 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R27
SYMATTR Value 330
SYMBOL res 912 656 R0
SYMATTR InstName R28
SYMATTR Value 22
SYMBOL diode 1024 688 R0
SYMATTR InstName D4
SYMATTR Value D1N4148
SYMBOL cap 688 800 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C11
SYMATTR Value 47000n
SYMATTR SpiceLine Rser=0.1
SYMBOL res 912 928 R0
SYMATTR InstName R29
SYMATTR Value 15k
SYMBOL res 1184 928 R0
SYMATTR InstName R31b
SYMATTR Value 1k
SYMBOL pnp 1264 848 M180
WINDOW 0 8 108 Left 2
WINDOW 3 27 49 Left 2
SYMATTR InstName Tr8
SYMATTR Value MJE15031
SYMBOL npn 1456 896 R0
WINDOW 0 74 16 Left 2
WINDOW 3 35 49 Left 2
SYMATTR InstName Tr10
SYMATTR Value MJ15003
SYMBOL npn 1456 288 R0
WINDOW 0 32 48 Left 2
WINDOW 3 -107 80 Left 2
SYMATTR InstName Tr9
SYMATTR Value MJ15003
SYMBOL ind 1504 672 R0
SYMATTR InstName L1
SYMATTR Value 6200n
SYMATTR SpiceLine Rser=0.1
SYMBOL res 1424 672 R0
SYMATTR InstName R36
SYMATTR Value 22
SYMBOL res 1504 528 R0
SYMATTR InstName R34
SYMATTR Value 0.2
SYMBOL res 1568 192 R0
SYMATTR InstName R37
SYMATTR Value 47
SYMBOL diode 1376 96 R0
WINDOW 3 -117 29 Left 2
SYMATTR Value D1N4007
SYMATTR InstName D5
SYMBOL diode 1376 192 R0
WINDOW 3 -110 33 Left 2
SYMATTR Value D1N4007
SYMATTR InstName D6
SYMBOL res 1120 96 R0
SYMATTR InstName R25
SYMATTR Value 15k
SYMBOL res 1312 944 R0
SYMATTR InstName R35
SYMATTR Value 22
SYMBOL cap 1840 352 R0
SYMATTR InstName C12
SYMATTR Value 150n
SYMATTR SpiceLine Rser=0.1
SYMBOL res 1840 448 R0
SYMATTR InstName R38
SYMATTR Value 10
SYMBOL res -256 944 R0
SYMATTR InstName R10
SYMATTR Value 8.2k
SYMBOL zener -64 864 R0
SYMATTR InstName D2
SYMATTR Value BZX15
SYMBOL res -432 656 R0
SYMATTR InstName R5
SYMATTR Value 4.7k
SYMBOL res -368 496 R0
SYMATTR InstName R4
SYMATTR Value 33k
SYMBOL res -304 944 R0
WINDOW 0 -40 30 Left 2
WINDOW 3 -60 78 Left 2
SYMATTR InstName R9
SYMATTR Value 8.2K
SYMBOL cap -96 896 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 47000n
SYMATTR SpiceLine Rser=0.1
SYMBOL res -352 -224 R0
SYMATTR InstName R7
SYMATTR Value 8.2k
SYMBOL res 912 544 R0
WINDOW 0 -50 26 Left 2
WINDOW 3 38 20 Left 2
SYMATTR InstName R26
SYMATTR Value 330
SYMBOL res 1088 784 R0
SYMATTR InstName R30a
SYMATTR Value 1k
SYMBOL res 1184 784 R0
SYMATTR InstName R30b
SYMATTR Value 1k
SYMBOL res 1088 928 R0
SYMATTR InstName R31a
SYMATTR Value 1k
SYMBOL cap 1424 864 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C15
SYMATTR Value 2.2n
SYMBOL res 1120 -416 R0
SYMATTR InstName R22
SYMATTR Value 330
SYMBOL res 1472 -224 R0
WINDOW 0 -42 37 Left 2
WINDOW 3 -38 72 Left 2
SYMATTR InstName R33
SYMATTR Value 22
SYMBOL ind 1552 -224 R0
SYMATTR InstName L3
SYMATTR Value 6200n
SYMATTR SpiceLine Rser=0.1
SYMBOL cap -144 112 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 47000n
SYMATTR SpiceLine Rser=0.1
SYMBOL OpAmps\\opamp2 -240 400 R0
SYMATTR InstName U1
SYMATTR Value NE5534
SYMBOL res 1376 240 R0
SYMATTR InstName R13
SYMATTR Value 1
TEXT -608 -1384 Left 2 !.inc NE5534.lib
TEXT -624 -1296 Left 2 !* MJE15031 PNP Power\n.MODEL MJE15031 PNP(IS=5e-10 NF=1 BF=40 VAF=50 IKF=1 ISE=1e-8 NE=1.5 BR=5 NR=1 RC=0.04 RE=0.01 RB=5 CJE=150p VJE=0.9 CJC=300p VJC=0.9 TF=30n TR=300n)\n \n* MJ15003 NPN Power\n.MODEL MJ15003 NPN(IS=2e-9 NF=1 BF=30 VAF=40 IKF=1 ISE=1e-8 NE=1.5 BR=3 NR=1 RC=0.02 RE=0.01 RB=5 CJE=250p VJE=0.9 CJC=600p VJC=0.9 TF=50n TR=500n)
TEXT -632 -1104 Left 2 !* 1N4148 Switching Diode\n.MODEL D1N4148 D(IS=4.35e-9 N=1.9 RS=0.6 CJO=1p VJ=0.65 M=0.33 TT=4n)\n \n* BZX15 15V Zener Diode\n.MODEL BZX15 D(IS=2e-10 N=1.1 RS=5 BV=15 IBV=5m CJO=50p VJ=0.75 M=0.33)
TEXT -632 -920 Left 2 !* BC640 PNP Medium Power\n.MODEL BC640 PNP(IS=6.15e-14 NF=1 BF=150 VAF=105 IKF=1.2 ISE=1e-16 NE=1.1 BR=8 NR=1 RC=0.145 RE=0.056 RB=2 CJE=115p VJE=0.73 CJC=52.6p VJC=0.66 TF=0.87n TR=275n)\n \n* BC212 PNP Small Signal\n.MODEL BC212 PNP(IS=8e-14 NF=1.2 BF=250 VAF=100 IKF=0.5 ISE=2e-15 NE=1.5 BR=10 NR=1 RC=1 RE=0.5 RB=100 CJE=15p VJE=0.7 CJC=8p VJC=0.7 TF=0.5n TR=50n)
TEXT -640 -728 Left 2 !* MJE340 NPN Power Transistor\n.MODEL MJE340 NPN(IS=5E-10 NF=1 BF=100 VAF=50 IKF=1 ISE=5E-9 NE=1.5 BR=3 NR=1 RC=0.02 RE=0.01 RB=5 CJE=50p VJE=0.75 CJC=200p VJC=0.75 TF=25n TR=300n)
TEXT -632 -640 Left 2 !.model MMBZ18VAL D(IS=1e-14 RS=2 BV=18 IBV=0.1 CJO=50p VJ=0.75 M=0.33 TT=4n)
TEXT -608 -576 Left 2 !.MODEL D1N4007 D(IS=2e-9 N=1.9 RS=0.05 BV=1000 IBV=5u CJO=10p VJ=0.7 M=0.33 TT=2u)
TEXT -328 -512 Left 2 !.options method=gear reltol=0.01 abstol=1e-6 vntol=1e-3
TEXT -624 -1424 Left 2 !.inc OPA1641.lib
TEXT -1000 312 Left 2 !.meas TRAN Pavg AVG( -V(out)*I(R50)) FROM 1m TO 3m
TEXT -840 192 Left 2 !.tran 0 3ms 0 1us
