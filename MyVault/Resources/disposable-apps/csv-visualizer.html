<!DOCTYPE html>
<html>
<head>
    <title>CSV 시각화기</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: Arial; padding: 20px; max-width: 800px; margin: 0 auto; }
        #dropzone {
            border: 2px dashed #ccc; padding: 40px; text-align: center;
            margin-bottom: 20px; border-radius: 8px;
        }
        #dropzone.dragover { border-color: #007bff; background: #f0f8ff; }
    </style>
</head>
<body>
    <h2>CSV 시각화기</h2>
    <div id="dropzone">CSV 파일을 여기에 드래그하세요</div>
    <canvas id="chart"></canvas>

    <script>
        const dropzone = document.getElementById('dropzone');
        let chart = null;

        dropzone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropzone.classList.add('dragover');
        });

        dropzone.addEventListener('dragleave', () => {
            dropzone.classList.remove('dragover');
        });

        dropzone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropzone.classList.remove('dragover');
            const file = e.dataTransfer.files[0];

            const reader = new FileReader();
            reader.onload = (event) => {
                const lines = event.target.result.split('\n').filter(l => l.trim());
                const labels = [], values = [];

                lines.slice(1).forEach(line => {
                    const [label, value] = line.split(',');
                    if (label && value) {
                        labels.push(label.trim());
                        values.push(parseFloat(value));
                    }
                });

                if (chart) chart.destroy();
                chart = new Chart(document.getElementById('chart'), {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{ label: '값', data: values, backgroundColor: '#4CAF50' }]
                    }
                });
            };
            reader.readAsText(file);
        });
    </script>
</body>
</html>
