# Lab2. Gemini CLI 활용한 Vibe Coding 기초 (앱만들기)

# 프롬프트 설계

- [목표] 선형회귀모델 데이터를 생성 및 모델적합 및 시각화 UI앱(Streamlit) 예제
- [활용예시]
  - y= a + b*x + e where e ~ N(0,sigma^2) 인 단순선형회귀모델을 따르는 임의의 값을 X=[c,d] 범위에서 1 단위로 생성한다.
  - 선형회귀모델을 적합시킨다. 타점과 적합선을 함께 시각화 한다.
  - 회귀모델 추정결과를 출력하고, 기울기에 대한 유의성 검정을 실시한다.
  - X=k 에서의 95% 신뢰구간과 예측구간을 구한다.
  - a=10,b=1,c=5,d=20,e=2,k=30 으로 기본 설정되어 있고 사용자가 변경할 수 있다.
- [요구사항]
  - Gemini CLI 에게 코드생성을 요청하는 시스템 프롬프트(gemini.md)와 작업요청 프롬프트를 단계별로 설계할 것.
  - UI는 Streamlit 으로 구현되며, 파라미터(a,b,c,d,e)는 사이드바에서 사용자가 직접 입력하고, 버튼을 눌러서 분석을 수행한다.
  - 초보자도 쉽게 이해할 수 있게 상세한 주석을 포함하며, 코드의 가독성이 좋도록 구조화하여 코드를 작성한다.
  - 그 외에 python과 VSCODE 사용에 익숙하지 않은 초보자도 쉽게 따라할 수 있도록 분석과정에 대한 instruction을 제공한다.
  - 프롬프트는 한글로 작성한다.
  - 기타 코드생성에 필요하다고 판단되는 추가 고려사항이 있는 경우, 반영하여 프롬프트를 설계할 것



-----

# Gemini 시스템 프롬프트: Python 데이터 분석 앱 개발 전문가  (gemini.md)

## 역할 정의

당신은 Python을 활용한 데이터 분석 및 시각화 애플리케이션 개발 전문가입니다. 특히 Streamlit을 사용한 인터랙티브 웹 앱 제작에 능숙하며, 코딩 초보자를 위한 교육적인 코드 작성에 특화되어 있습니다. 당신의 최우선 목표는 사용자의 요구사항을 정확히 이해하고, 깨끗하며, 효율적이고, 상세한 설명이 포함된 코드를 생성하는 것입니다.

## 코드 생성 원칙

1. **가독성 우선**: 항상 PEP 8 스타일 가이드를 준수하여 코드를 작성합니다. 변수명과 함수명은 그 역할이 명확히 드러나도록 직관적으로 작성해야 합니다.
    
2. **상세한 한글 주석**: 코드의 모든 주요 부분(라이브러리 임포트, 함수 정의, 클래스, 핵심 로직, 알고리즘 등)에 대해 **한글로 상세한 주석**을 작성해야 합니다. 왜 이 코드가 필요한지, 어떤 역할을 하는지에 대한 설명을 포함하여 초보자가 코드의 흐름을 쉽게 따라올 수 있도록 돕습니다.
    
3. **구조화된 코드**: 관련된 기능은 함수로 묶어 모듈화합니다. 전역 변수 사용을 최소화하고, 데이터의 흐름이 명확히 보이도록 코드를 구조화해야 합니다.
    
4. **사용자 가이드 포함**: 생성된 Python 스크립트 최상단에는 항상 `"""..."""` 형태의 독스트링(docstring)으로 **'사용자 실행 가이드'**를 포함해야 합니다. 이 가이드에는 다음 내용이 반드시 포함되어야 합니다.
    
    - 앱에 대한 간략한 설명
        
    - 실행에 필요한 라이브러리 목록
        
    - 라이브러리 설치를 위한 `pip` 명령어
        
    - 터미널에서 앱을 실행하는 `streamlit run` 명령어
        
5. **라이브러리 활용**: 데이터 처리에는 `pandas`와 `numpy`, 통계 분석에는 `statsmodels`, 시각화에는 `matplotlib` 또는 `plotly` 사용을 기본으로 합니다. 사용자의 요구사항에 명시된 라이브러리를 최우선으로 사용합니다.
    
6. **에러 처리 및 예외 상황 고려**: 사용자의 입력값이 유효하지 않은 경우(예: 범위 오류)를 대비하여, 간단한 유효성 검사 로직과 안내 메시지를 포함하는 것을 권장합니다.
    

## 응답 형식

- 사용자가 Python 코드 생성을 요청하면, 다른 설명 없이 바로 완성된 전체 코드 블록을 제공합니다.
    
- 코드 블록은 마크다운 형식(`python ...` )을 사용합니다.
    
- '사용자 실행 가이드'는 코드 시작 부분의 독스트링 안에 작성합니다.



# Streamlit 기반 단순 선형회귀 분석 및 시각화 앱 코드 생성 (Gemini CLI에서 직접 입력)

아래의 요구사항에 맞춰, **단순 선형회귀 분석**을 위한 데이터 생성, 모델 적합, 시각화, 결과 해석 기능을 제공하는 **Streamlit 웹 애플리케이션**을 Python 코드로 작성해 주세요.

### 1. 앱의 핵심 기능 및 목표

사용자가 직접 파라미터를 설정하여 가상의 데이터를 생성하고, 해당 데이터에 대한 선형회귀분석을 수행하여 통계적 개념(회귀선, 유의성 검정, 신뢰구간, 예측구간)을 직관적으로 학습할 수 있는 교육용 도구를 제작합니다.

### 2. UI/UX 요구사항 (Streamlit)

- **사이드바 (Sidebar)**: 모든 사용자 입력 컨트롤은 `st.sidebar` 안에 위치시켜 주세요.
    
- **입력 파라미터**: 사용자가 아래의 값들을 직접 조정할 수 있도록 `st.number_input`을 사용해 주세요. 각 파라미터에 대한 설명(`help` 속성 활용)을 추가하여 사용자 이해를 도와주세요.
    
    - `a` (절편, Intercept): 기본값 `10.0`
        
    - `b` (기울기, Slope): 기본값 `1.0`
        
    - `sigma` (오차항 표준편차): 기본값 `2.0`, 최솟값 `0.0`
        
    - `c` (x의 시작값): 기본값 `5`
        
    - `d` (x의 끝값): 기본값 `20`
        
    - `k` (예측을 위한 특정 x값): 기본값 `30`
        
- **입력값 유효성 검사**: `d`는 `c`보다 항상 커야 합니다. 만약 `c >= d`인 경우, 앱 메인 화면에 에러 메시지(`st.error`)를 표시하고 분석을 진행하지 않도록 처리해주세요.
    
- **실행 버튼**: 사이드바 하단에 "분석 실행" 버튼(`st.button`)을 추가합니다. 이 버튼을 클릭했을 때만 전체 분석 과정이 수행되어야 합니다.
    

### 3. 분석 프로세스 (버튼 클릭 시)

1. **데이터 생성**:
    
    - `x` 데이터는 `c`부터 `d`까지 1씩 증가하는 정수 배열로 생성합니다. (`numpy.arange` 활용)
        
    - `y` 데이터는 `y = a + b*x + e` 식에 따라 생성합니다. 오차항 `e`는 `numpy.random.normal(0, sigma, size=len(x))`를 통해 생성합니다.
        
    - 생성된 데이터는 `pandas.DataFrame`으로 관리합니다.
        
2. **모델 적합**:
    
    - `statsmodels.formula.api`의 `ols` 함수를 사용하여 `y ~ x` 형태의 단순 선형회귀모델을 적합시킵니다. `sm.add_constant`를 사용하는 방식보다 직관적이므로 이 방식을 사용해주세요.
        

### 4. 결과 출력 및 해석

- **시각화**:
    
    - `matplotlib`을 사용하여 그래프를 생성하고 `st.pyplot()`으로 앱에 표시합니다.
        
    - 그래프에는 **데이터 산점도**와 적합된 **회귀선**이 함께 그려져야 합니다.
        
    - 그래프 제목, x축/y축 레이블을 명확하게 표시합니다.
        
- **모델 요약**:
    
    - `statsmodels`가 제공하는 모델 요약 결과(`model.summary()`) 전체를 `st.text()` 또는 `st.code()`를 사용하여 그대로 출력합니다.
        
- **핵심 결과 해석**:
    
    - 모델 요약 결과 아래에, 초보자가 이해하기 쉽도록 핵심적인 내용을 별도로 정리하여 `st.subheader`와 `st.write`를 사용해 출력합니다.
        
    - **기울기(b) 유의성 검정**: 기울기의 P-값(P>|t|)을 추출하여, 유의수준 0.05를 기준으로 통계적 유의성 여부를 한글 문장으로 설명합니다. (예: "기울기의 P-값은 0.001로, 유의수준 0.05보다 작으므로 독립변수 x는 종속변수 y에 통계적으로 유의한 영향을 미칩니다.")
        
    - **신뢰구간 및 예측구간**:
        
        - 사용자가 입력한 `x=k` 값에 대한 **95% 신뢰구간**과 **95% 예측구간**을 계산합니다.
            
        - 계산된 구간을 명확한 설명과 함께 출력합니다. (예: "x=30일 때, 평균 응답의 95% 신뢰구간은 [A, B] 입니다.")
            
        - 만약 `k` 값이 데이터 생성 범위(`c`, `d`)를 벗어나는 경우, "입력하신 x값이 데이터 범위를 벗어나 예측의 불확실성이 높을 수 있습니다."와 같은 경고 메시지(`st.warning`)를 함께 출력합니다.
            

### 5. 코드 품질 및 추가 요구사항

- 시스템 프롬프트(`gemini.md`)에 명시된 모든 코드 생성 원칙(상세한 한글 주석, 구조화, 사용자 가이드 등)을 철저히 준수하여 코드를 작성해야 합니다.
- 실행방법을 상세히 정리해서 README.md 파일로 정리해주세요. 