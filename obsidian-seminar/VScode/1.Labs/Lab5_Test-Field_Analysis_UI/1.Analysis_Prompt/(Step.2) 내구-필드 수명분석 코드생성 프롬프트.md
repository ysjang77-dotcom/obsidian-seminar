### **생성형 AI를 위한 프롬프트 설계안**

너는 **신뢰성 공학(Reliability Engineering) 데이터 분석 전문가**이다. Python의 `reliability` 패키지를 사용하여 수명 데이터를 분석하고, 가속 수명 시험(Accelerated Life Testing, ALT)의 가속 계수를 산출하는 데 매우 능숙하다. 너의 임무는 브레이크 패드의 내구시험 데이터와 필드 데이터를 비교 분석하여, 내구시험 모드의 가속 계수를 산출하고 그 결과를 해석하는 Python 스크립트를 작성하는 것이다.

**"단계별로 생각해서(Let's think step by step)"** 다음의 구체적인 과업을 수행하는 코드를 생성해 줘.

### **과업(Task) 상세 내용**

#### **[배경]**

브레이크 패드의 수명을 확인하고, 내구시험이 필드 주행 환경을 얼마나 가속하는지 정량적으로 분석하고자 한다. 이를 위해 두 종류의 데이터셋이 준비되었다.

1. **내구시험 데이터 (Durability Test Data):** 특정 주행 모드에서 얻은 브레이크 패드 수명 데이터 20개.
    
2. **필드 데이터 (Field Data):** 실제 사용 환경에서 얻은 브레이크 패드 수명 데이터 20개.
    
3. 두 데이터셋 모두 고장 데이터(Complete data)이며, '주행거리'와 '유형' 컬럼으로 구성되어 있다.
    

#### **[분석 목표]**

두 데이터셋의 수명 분포를 분석하고, 통계적 검정을 통해 공통 형상모수(common shape parameter) 가정의 타당성을 확인한 후, 가속 계수(Acceleration Factor)를 계산하고 결과를 해석한다.

#### **[분석 절차]**

**0. 사전 준비 (Setup)**

- 분석에 필요한 `reliability` 라이브러리를 임포트하고, 결과물(로그, 플롯, 보고서)을 저장할 'results' 디렉토리를 생성한다.
    
- 모든 분석 과정의 시작, 중간 결과, 종료를 기록하는 간단한 로깅 시스템을 설정한다.
    

**1. 데이터 준비 및 개별 분석 (Step 1: Data Preparation & Individual Analysis)**

- **1-1.** 내구시험 데이터와 필드 데이터를 `panda`를 사용하여 xlsx 또는 csv 파일로 각각 로드한다. 설정된 컬럼명(distance(km), type)을 사용하여 데이터를 내구시험(test)와 필드(field)로 분리한다. 
    
- **1-2.** `reliability.Fitters.Fit_Everything` 함수를 사용하여 각 데이터셋(내구시험, 필드)에 대해 최적의 수명 분포를 찾는다.
    
    - **분석 대상 분포:** Weibull_2P, Lognormal_2P, Normal_2P, Exponential_1P 분포만 포함하고, 다른 분포는 제외한다. (나머지 분포들은 exclude 할 것)
        
    - **최적 분포 선정 기준:** **BIC(Bayesian Information Criterion)** 값이 가장 낮은 분포를 최적 분포로 선정한다.
        
    - **산출물:**
        
        - 각 데이터셋의 최적 분포 모델과 파라미터(모수) 추정치.
            
        - 각 분포의 적합도 지표(Log-Likelihood, AICc, BIC, AD)를 포함한 결과 테이블.
            
        - 각 데이터셋에 대한 확률도(Probability Plot)와 최적 분포의 확률도를 시각화하여 'results' 폴더에 저장한다.
            

**2. 공통 형상모수 가정 검정 (Step 2: Common Shape Parameter Test)**

- **2-1.** 두 데이터셋의 최적 분포가 동일한 종류인지 확인한다. 분포가 다르면 경고 메세지를 출력한다.
    
- **2-2.** 앞에서 얻은 각 분석 결과 객체에서 형상모수(와이블 beta) 또는 척도모수(대수정규분포의 sigma)의 점추정치와 신뢰구간을 추출한다.
    
- **2-3.** `matplotlib` 의 `errorbar` 함수를 사용하여, 두 데이터셋의 형상모수(와이블 beta) 또는 척도모수(대수정규분포의 sigma)를 시각화 하는 오차 막대 그래프를 생성하고 'results' 폴더에 저장한다.

- **2-4.** 두 신뢰구간이 겹치는지 판단한다. 겹칠 경우 '공통 형상모수 가정이 타당하다'고 결론내리고, 겹치치 않을 경우 '타당하지 않을 수 있다는 경고를 로그와 보고서에 기록한다.
    

**3. 가속 계수 계산 (Step 3: Acceleration Factor Calculation)**

- **3-1.** 공통 형상모수 가정이 타당하다고 판단되면, 가속 계수를 계산한다. 가속 계수는 두 분포의 척도모수(와이블 분포의 alpha, 대수정규분포의 exp(mu), 정규분포의 mu, 지수분포의 1/lambda)의 비율로 정의된다.
    
    - **가속 계수 (AF) = 필드 데이터의 척도모수(위치모수) / 내구시험 데이터의 척도모수(위치모수)**
        
    - **주의:** `reliability` 패키지는 공통 형상모수를 강제하여 파라미터를 재추정하는 직접적인 함수를 제공하지 않는다. 따라서, 2-2 단계에서 공통 형상모수가 타당하다고 결론 내린 근거를 명시하고, Step 1-2에서 각각 추정한 척도모수를 사용하여 가속 계수를 계산한다.
        
- **3-2.** 계산된 가속 계수의 의미를 해석한다.
    
    - **해석 예시:** "가속 계수가 'X'로 계산되었으므로, 내구시험 모드는 필드 주행 환경을 약 X배 가속시킨다고 해석할 수 있다."
        
- **산출물:**
    
    - 계산된 가속 계수 값.
        
    - 가속 계수에 대한 해석.
        

**4. 최종 보고서 생성 (Step 4: Final Report Generation)**

- **4-1.** 지금까지의 모든 분석 과정과 결과를 종합하여 텍스트 파일 형식의 최종 보고서를 'results' 폴더에 생성한다.
    
- **보고서 구성:**
    
    - **분석 개요:** 분석 목적과 배경 설명.
        
    - **데이터 요약:** 각 데이터셋의 기본 통계 정보.
        
    - **개별 수명 분석:**
        
        - 내구시험 데이터의 최적 분포와 파라미터, 확률도.
            
        - 필드 데이터의 최적 분포와 파라미터, 확률도.
            
    - **공통 형상모수 검정:**
        
        - Likelihood 등고선 그림에 대한 설명.
            
        - 공통 형상모수 가정의 타당성 결론.
            
    - **가속 계수 분석:**
        
        - 계산된 가속 계수 값.
            
        - 가속 계수의 의미와 비즈니스적 해석 (예: 내구시험 1시간은 필드 주행 X시간에 해당).
            
    - **결론 및 제언:** 분석 결과 요약 및 추가 분석 제안.
        

---

### **결과물 형식(Format) 및 제약조건**

- **언어 및 라이브러리:**
    
    - Python 언어만 사용한다.
        
    - 데이터 분석 및 시각화에는 **오직 `reliability` 패키지만을 사용**해야 한다. (데이터 핸들링을 위한 `pandas`는 허용)
        
    - **첨부된 `reliability` 패키지 API 문서를 반드시 참조**하여, 실제 존재하는 함수와 정확한 파라미터만을 사용해야 한다.
        
- **코드 구조:**
    
    - **모듈화:** 각 분석 단계(데이터 로딩, 개별 분석, 비교, 가속계수 계산, 보고서 생성)를 별도의 Python 함수로 구현하여 재사용성과 가독성을 높인다.
        
    - **단계별 실행:** 사용자가 각 함수의 실행 여부를 결정하고 중간 결과를 확인할 수 있도록, 주 실행부(main block)에서 각 함수를 순차적으로 호출하는 형태로 코드를 구성한다.
        
        Python
        
        ```
        # 예시 실행 구조
        if __name__ == "__main__":
            # Step 1
            durability_data, field_data = load_and_prepare_data()
            durability_fit_results = analyze_single_dataset(durability_data, 'Durability_Test')
            field_fit_results = analyze_single_dataset(field_data, 'Field')
        
            # 사용자가 중간 결과를 확인 후 다음 단계 진행
            input("Step 1 완료. 결과를 확인하고 계속하려면 Enter를 누르세요...")
        
            # Step 2
            compare_distributions(durability_fit_results, field_fit_results)
        
            input("Step 2 완료. 결과를 확인하고 계속하려면 Enter를 누르세요...")
        
            # ...이하 생략
        ```
        
    - **주석:** 모든 코드 라인과 함수에는 상세한 주석을 달아 로직, 사용된 `reliability` 함수, 결과 해석 방법을 설명한다.
        
- **산출물 관리:**
    
    - **로깅:** 코드 실행 시 모든 과정(함수 호출, 주요 파라미터, 결과 요약)이 로그 파일(`results/analysis_log.txt`)에 기록되도록 한다.
        
    - **결과물 저장:** 모든 생성된 플롯은 고유한 이름(예: `durability_probability_plot.png`)으로 `results` 폴더에 저장한다. 최종 보고서도 `results/final_report.md` 형식으로 저장한다.
        
- **코드 출력:**
    
    - 이 모든 요구사항을 반영한 파이썬 코드를 작성해주세요.