# 프롬프트 설계요구
- [목적] 
	- 개발된 RAG 분석코드를 바탕으로 RAG기반의 신뢰성분석 전문가 페르소나를 가진 챗봇을 streamlit으로 구현
- [활용사례]
	- 저장된 신뢰성 DB를 바탕으로 객관적인 근거에 대한 답변을 제공하고, 이를 기반으로 사용자가 추가적인 추론&분석을 요구하면 신뢰성 전문가의 페르소나를 가지고 과거 대화기록을 모두 반영해서 분석결과를 제시하는 챗봇
- [요구사항]
	- 아래 제시된 프롬프팅 핵심기법에 따라서 코드를 작성할 것
	- 생성형AI에게 python 코드생성을 요청하는 프롬프트를 출력할 것
	- 제시되는 python 분석코드(1.RAG_example.py)를 활용할 것
	- 제시되는 활용사례가 모두 구현되도록 할것
	- 기 확보된 vector DB(faiss)을 활용할 것
	- langchain 을 사용할 것
	- 임베딩 및 llm 모델은 구글의 gemini 모델을 사용할 것
	- 그 외에 RAG 분석을 수행하는데 필요한 추가 요구사항, 논리적으로 보완할 점이나 고려할 사항을 추가해서 프롬프트를 설계할 것

# (참고자료) 프롬프팅 핵심기법

## **1) 역할-과업-형식 (PTF: Persona, Task, Format)**

PTF는 AI에게 지시를 내리는 가장 기본적이면서도 강력한 프레임워크입니다. AI에게 명확한 역할을 부여하면, 해당 분야의 지식과 스타일에 맞는 코드를 생성할 확률이 높아집니다.

- **P (Persona, 역할 부여):** AI의 전문 분야와 정체성을 구체적으로 지정합니다. 단순히 전문가 역할을 부여하는 것을 넘어, 사용하는 기술 스택과 전문 분야를 명시하면 더 정제된 결과물을 얻을 수 있습니다.
    
    - **예시:** "너는 **신뢰성 공학(Reliability Engineering) 전문가**이며, Python의 `pandas`, `numpy`, `matplotlib` 라이브러리를 활용한 **수명 데이터 분석(Lifetime Data Analysis)에 능숙**해."
        
- **T (Task, 과업 지시):** 수행할 작업을 구체적이고 명확하게 지시합니다. 두루뭉술한 지시 대신, 분석할 데이터의 정보(파일명, 컬럼 구조), 사용할 분석 기법 등 상세 정보를 포함해야 AI가 작업을 정확히 이해할 수 있습니다.
    
    - **예시:** "첨부된 `alt_data.csv` 파일(컬럼: `stress_level`, `time_to_failure`)을 읽어, **스트레스 수준별 와이블 분포(Weibull distribution)를 분석**하고 각 파라미터를 추정해줘."
        
- **F (Format, 형식 지정):** 결과물을 어떤 형태로 받을지 명시합니다. 코드뿐만 아니라, 보고서 초안, 함수 설명 문서(docstring), 특정 폴더 구조에 맞는 파일 목록 등 원하는 모든 출력 형식을 지정할 수 있습니다.
    
    - **예시:** "결과는 **Jupyter Notebook 형식**으로 셀을 나누어줘. 첫 번째 셀은 데이터 로딩, 두 번째 셀은 분석 코드, 세 번째 셀은 시각화 코드를 포함해줘."
        

### **2) 제로샷, 퓨샷, CoT 기법의 활용**

상황에 따라 다른 프롬프팅 기법을 선택하여 AI의 응답을 유도할 수 있습니다.

- **제로샷 프롬프팅 (Zero-Shot Prompting):** 별도의 예시 없이 바로 작업을 지시하는 방식으로, 작업이 간단하고 명확할 때 빠르게 사용하기 좋습니다.
    
    - **예시:** "파이썬으로 현재 시간을 'YYYY-MM-DD HH:MM:SS' 형식으로 출력하는 코드를 만들어줘."
        
- **퓨샷 프롬프팅 (Few-Shot Prompting):** 1~3개의 간단한 예시(입력과 출력 쌍)를 먼저 보여주고 작업을 지시합니다. AI가 내 의도를 잘 이해하지 못하거나, 특정 출력 형식을 따라 하게 만들고 싶을 때 효과적입니다. 제공하는 예시의 품질이 결과에 큰 영향을 미칩니다.
    
    - **예시:** "아래 예시처럼, 주어진 고장 코드(Failure Code)에서 시스템명만 추출하는 파이썬 함수를 만들어줘.
        
        - `F-SYS1-001` -> `SYS1`
            
        - `F-SYS2-005` -> `SYS2`"
            
- **사고의 연쇄 (CoT: Chain-of-Thought) 프롬프팅:** 복잡한 문제의 경우, AI에게 "단계별로 생각해서(Step-by-step)" 해결 과정을 설명하며 코드를 작성하도록 유도하는 기법입니다. 여러 단계를 거쳐야 하는 복잡한 분석이나 알고리즘 구현에 필수적이며, AI가 스스로 논리를 점검하게 만들어 실수를 줄일 수 있습니다.
    
    - **예시:** "총 가동 시간과 고장 횟수 데이터가 주어졌을 때, **MTBF(평균고장간격)를 계산하는 과정**을 **'단계별로 생각해서(Let's think step by step)'** 논리적으로 설명하고, 이를 수행하는 Python 코드를 작성해줘."
        

### **3) 명확한 맥락 제공 및 제약 조건 설정**

코드의 정확성과 품질을 높이기 위해 명확한 맥락과 구체적인 제약 조건을 설정하는 것이 중요합니다.

- **맥락(Context) 제공:** 분석하려는 데이터의 일부(헤더, 몇 개 행)를 직접 보여주거나, 기존 코드의 특정 부분을 제공하며 "이 코드에서 발생하는 에러를 해결해줘" 또는 "이 함수에 기능을 추가해줘"라고 지시합니다.
    
- **제약 조건(Constraints) 설정:** 사용할 프로그래밍 언어, 라이브러리 버전, 피해야 할 함수, 코드 스타일 등을 명시하여 결과물이 특정 요구사항을 만족하도록 지시합니다.
    
    - **예시:** “파이썬 3.9 버전을 기준으로, **numpy 라이브러리만 사용**해서 두 행렬의 곱을 구하는 코드를 작성해줘.”
        
- **테스트 케이스 먼저 제시하기 (TDD 방식 활용):** AI가 코드를 작성하기 전에, 통과해야 할 테스트 케이스를 먼저 제공하는 전략입니다. 이는 AI가 만들어낼 코드의 정확성과 신뢰도를 크게 향상시킵니다.
    
    - **예시:** "아래 `pytest` 형식의 **단위 테스트를 모두 통과**하는 `calculate_reliability(t, mtbf)` 함수를 작성해줘."
        
- **소프트웨어 공학 원칙 적용하기:** 소프트웨어 개발 방법론(SOLID, SRP,  클린 아키텍처, 테스트 주도 개발)을 적용할 것을 명시적으로 요구하여 모듈화되고 유지보수하기 좋은 코드를 생성하도록 유도할 수 있습니다.
    
    - **예시:** "데이터 처리, 분석, 시각화 기능을 각각 별도의 함수로 만들어줘. 각 함수는 **단일 책임 원칙(Single Responsibility Principle)을 준수**하도록 설계해줘."
        