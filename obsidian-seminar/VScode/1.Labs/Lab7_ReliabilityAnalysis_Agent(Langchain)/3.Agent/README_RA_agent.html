<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>신뢰성 분석 전문가 챗봇</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__html"><h1 id="신뢰성-분석-챗봇-reliability-analysis-chatbot">신뢰성 분석 챗봇 (Reliability Analysis Chatbot)</h1>
<p>이 프로젝트는 LangChain과 Streamlit을 이용하여 수명 데이터 분석을 수행하는 대화형 AI 챗봇 애플리케이션입니다. 사용자는 웹 UI를 통해 데이터 파일을 업로드하고, 자연어 명령으로 신뢰성 분석을 수행하고 그 결과를 시각적으로 확인할 수 있습니다.</p>
<h2 id="🚀-주요-기능">🚀 주요 기능</h2>
<ul>
<li>
<p><strong>웹 기반 UI</strong>: Streamlit을 사용하여 파일 업로드, 분석 설정, 챗봇과의 대화 기능을 제공합니다.</p>
</li>
<li>
<p><strong>자연어 처리</strong>: LangChain과 Google Gemini 모델을 기반으로 한 에이전트가 사용자의 자연어 요청을 해석하고 적절한 분석을 수행합니다.</p>
</li>
<li>
<p><strong>다양한 신뢰성 분석</strong>:</p>
</li>
<li>
<p>데이터 전처리 및 요약</p>
</li>
<li>
<p>최적 수명 분포 탐색 (와이블, 로그정규 등)</p>
</li>
<li>
<p>특정 분포를 이용한 상세 분석 (B-Life, 고장 확률 계산)</p>
</li>
<li>
<p>가속수명시험(ALT) 데이터의 모수 동일성 검토</p>
</li>
<li>
<p><strong>시각화</strong>: 분석 결과를 테이블, 텍스트, 그리고 Matplotlib으로 생성된 그래프로 시각화하여 제공합니다.</p>
</li>
</ul>
<hr>
<h2 id="📂-파일별-역할-및-기능">📂 파일별 역할 및 기능</h2>
<h3 id="ra_code_v6.py-백엔드-분석-엔진">1. <code>RA_code_v6.py</code> (백엔드 분석 엔진)</h3>
<ul>
<li>
<p><strong>요약</strong>: 신뢰성/수명 데이터 분석의 핵심 로직을 담고 있는 순수 Python 스크립트입니다. 데이터 처리, 통계 계산, 시각화(그래프 생성) 등 모든 분석 기능이 이 파일의 함수들로 구현됩니다.</p>
</li>
<li>
<p><strong>역할</strong>: Streamlit이나 LangChain에 대한 의존성 없이 독립적으로 실행될 수 있는 분석 모듈입니다.</p>
</li>
<li>
<p><strong>주요 함수</strong>:</p>
</li>
<li>
<p><code>preprocess_and_summarize_data</code>: 엑셀/CSV 파일을 읽어 데이터를 전처리하고, 그룹별 고장/관측중단 데이터 수를 요약합니다.</p>
</li>
<li>
<p><code>find_best_distribution</code>: 여러 통계 분포를 데이터에 피팅하여 BIC 점수를 기준으로 가장 적합한 분포를 찾습니다.</p>
</li>
<li>
<p><code>analyze_single_distribution</code>: 특정 그룹 데이터에 대해 단일 분포를 적용하여 B-Life, 고장 확률 등 상세 분석을 수행합니다.</p>
</li>
<li>
<p><code>check_parameter_homogeneity</code>: 여러 스트레스 그룹 간의 형상모수(beta, sigma)가 통계적으로 동일한지 검토합니다.</p>
</li>
</ul>
<h3 id="tools.py-langchain-도구-브리지">2. <code>tools.py</code> (LangChain 도구 브리지)</h3>
<ul>
<li>
<p><strong>요약</strong>: <code>RA_code_v6.py</code>에 정의된 분석 함수들을 LangChain 에이전트가 사용할 수 있는 "도구(Tool)"로 래핑(wrapping)하는 파일입니다.</p>
</li>
<li>
<p><strong>역할</strong>: LangChain 에이전트와 순수 분석 코드(<code>RA_code_v6.py</code>)를 연결하는 브리지(Bridge)입니다. LLM이 보낸 입력을 분석 함수가 이해할 수 있는 형태로 변환하고, 분석 함수의 출력을 LLM이 이해할 수 있는 형태로 변환합니다.</p>
</li>
<li>
<p><strong>주요 기능</strong>:</p>
</li>
<li>
<p><code>@tool</code> 데코레이터를 사용하여 각 분석 함수를 LangChain 도구로 변환합니다.</p>
</li>
<li>
<p>각 도구의 docstring에 "이 도구를 언제 사용해야 하는지"를 명확히 설명하여 에이전트의 올바른 도구 선택을 돕습니다.</p>
</li>
<li>
<p>Streamlit의 <code>st.session_state</code>를 사용하여 UI의 파일 정보나 설정값을 읽어와 분석 함수에 전달합니다.</p>
</li>
<li>
<p>분석 결과를 표준화된 딕셔너리(JSON) 형태로 가공하여 에이전트에게 반환합니다.</p>
</li>
</ul>
<h3 id="agent.py-챗봇의-두뇌">3. <code>agent.py</code> (챗봇의 두뇌)</h3>
<ul>
<li>
<p><strong>요약</strong>: LangChain을 사용하여 LLM(Gemini) 기반의 에이전트를 생성하고 설정하는 파일입니다.</p>
</li>
<li>
<p><strong>역할</strong>: 사용자의 자연어 입력을 받아 어떤 <code>tools.py</code>의 도구를 사용해야 할지 결정하고, 실행 결과를 바탕으로 최종 답변을 생성하는 챗봇의 “두뇌” 역할을 합니다.</p>
</li>
<li>
<p><strong>주요 함수</strong>:</p>
</li>
<li>
<p><code>create_agent_executor</code>: 에이전트의 실행기(AgentExecutor)를 생성합니다. Gemini 모델, <code>tools.py</code>의 도구들, 에이전트의 역할을 정의하는 프롬프트, 대화 기록 메모리를 조합하여 최종 에이전트를 구성합니다.</p>
</li>
</ul>
<h3 id="app.py-프론트엔드-ui">4. <code>app.py</code> (프론트엔드 UI)</h3>
<ul>
<li>
<p><strong>요약</strong>: Streamlit을 사용하여 웹 기반의 사용자 인터페이스(UI)를 구현하는 메인 애플리케이션 파일입니다.</p>
</li>
<li>
<p><strong>역할</strong>: 프론트엔드. 사용자와 직접 상호작용하며, 전체 애플리케이션의 진입점(Entry Point) 역할을 합니다.</p>
</li>
<li>
<p><strong>주요 기능</strong>:</p>
</li>
<li>
<p>파일 업로드(<code>st.file_uploader</code>), 분석 설정(<code>st.form</code>), 챗봇 인터페이스(<code>st.chat_input</code>) 등 UI를 구성합니다.</p>
</li>
<li>
<p>사용자 설정이 완료되면 <code>agent.py</code>의 <code>create_agent_executor</code>를 호출하여 에이전트를 초기화합니다.</p>
</li>
<li>
<p>사용자 채팅 입력을 받아 에이전트를 실행하고, 반환된 결과(텍스트, DataFrame, 이미지 등)를 적절한 UI 컴포넌트로 화면에 표시합니다.</p>
</li>
<li>
<p><code>st.session_state</code>를 통해 파일 경로, 설정값, 대화 기록 등 세션 정보를 관리합니다.</p>
</li>
</ul>
<hr>
<h2 id="📊-시스템-아키텍처-및-작동-프로세스">📊 시스템 아키텍처 및 작동 프로세스</h2>
<h3 id="전체-워크플로우-다이어그램">전체 워크플로우 다이어그램</h3>
<pre class=" language-mermaid"><svg id="mermaid-svg-c34c3aHbtlbgz6Ib" width="100%" xmlns="http://www.w3.org/2000/svg" height="1913" style="max-width: 2496px;" viewBox="-50 -10 2496 1913"><style>#mermaid-svg-c34c3aHbtlbgz6Ib{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#000000;}#mermaid-svg-c34c3aHbtlbgz6Ib .error-icon{fill:#552222;}#mermaid-svg-c34c3aHbtlbgz6Ib .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-c34c3aHbtlbgz6Ib .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-c34c3aHbtlbgz6Ib .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-c34c3aHbtlbgz6Ib .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-c34c3aHbtlbgz6Ib .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-c34c3aHbtlbgz6Ib .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-c34c3aHbtlbgz6Ib .marker{fill:#666;stroke:#666;}#mermaid-svg-c34c3aHbtlbgz6Ib .marker.cross{stroke:#666;}#mermaid-svg-c34c3aHbtlbgz6Ib svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-c34c3aHbtlbgz6Ib .actor{stroke:hsl(0,0%,83%);fill:#eee;}#mermaid-svg-c34c3aHbtlbgz6Ib text.actor > tspan{fill:#333;stroke:none;}#mermaid-svg-c34c3aHbtlbgz6Ib .actor-line{stroke:#666;}#mermaid-svg-c34c3aHbtlbgz6Ib .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333;}#mermaid-svg-c34c3aHbtlbgz6Ib .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#333;}#mermaid-svg-c34c3aHbtlbgz6Ib #arrowhead path{fill:#333;stroke:#333;}#mermaid-svg-c34c3aHbtlbgz6Ib .sequenceNumber{fill:white;}#mermaid-svg-c34c3aHbtlbgz6Ib #sequencenumber{fill:#333;}#mermaid-svg-c34c3aHbtlbgz6Ib #crosshead path{fill:#333;stroke:#333;}#mermaid-svg-c34c3aHbtlbgz6Ib .messageText{fill:#333;stroke:#333;}#mermaid-svg-c34c3aHbtlbgz6Ib .labelBox{stroke:hsl(0,0%,83%);fill:#eee;}#mermaid-svg-c34c3aHbtlbgz6Ib .labelText,#mermaid-svg-c34c3aHbtlbgz6Ib .labelText > tspan{fill:#333;stroke:none;}#mermaid-svg-c34c3aHbtlbgz6Ib .loopText,#mermaid-svg-c34c3aHbtlbgz6Ib .loopText > tspan{fill:#333;stroke:none;}#mermaid-svg-c34c3aHbtlbgz6Ib .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:hsl(0,0%,83%);fill:hsl(0,0%,83%);}#mermaid-svg-c34c3aHbtlbgz6Ib .note{stroke:hsl(60,100%,23.3333333333%);fill:#ffa;}#mermaid-svg-c34c3aHbtlbgz6Ib .noteText,#mermaid-svg-c34c3aHbtlbgz6Ib .noteText > tspan{fill:#333;stroke:none;}#mermaid-svg-c34c3aHbtlbgz6Ib .activation0{fill:#f4f4f4;stroke:#666;}#mermaid-svg-c34c3aHbtlbgz6Ib .activation1{fill:#f4f4f4;stroke:#666;}#mermaid-svg-c34c3aHbtlbgz6Ib .activation2{fill:#f4f4f4;stroke:#666;}#mermaid-svg-c34c3aHbtlbgz6Ib:root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}#mermaid-svg-c34c3aHbtlbgz6Ib sequence{fill:apa;}</style><g></g><g><line id="actor43" x1="75" y1="5" x2="75" y2="1902" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="75" dy="0">사용자</tspan></text></g><g><line id="actor44" x1="567" y1="5" x2="567" y2="1902" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="489" y="0" fill="#eaeaea" stroke="#666" width="156" height="65" rx="3" ry="3" class="actor"></rect><text x="567" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="567" dy="0">app.py (Streamlit UI)</tspan></text></g><g><line id="actor45" x1="1092" y1="5" x2="1092" y2="1902" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="997.5" y="0" fill="#eaeaea" stroke="#666" width="189" height="65" rx="3" ry="3" class="actor"></rect><text x="1092" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="1092" dy="0">agent.py (Agent Executor)</tspan></text></g><g><line id="actor46" x1="1629" y1="5" x2="1629" y2="1902" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="1531.5" y="0" fill="#eaeaea" stroke="#666" width="195" height="65" rx="3" ry="3" class="actor"></rect><text x="1629" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="1629" dy="0">tools.py (LangChain Tools)</tspan></text></g><g><line id="actor47" x1="2302" y1="5" x2="2302" y2="1902" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="2208" y="0" fill="#eaeaea" stroke="#666" width="188" height="65" rx="3" ry="3" class="actor"></rect><text x="2302" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="2302" dy="0">RA_code_v6.py (분석 엔진)</tspan></text></g><defs><marker id="arrowhead" refX="9" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z"></path></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4"><path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"></path><path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><defs><marker id="filled-head" refX="18" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><defs><marker id="sequencenumber" refX="15" refY="15" markerWidth="60" markerHeight="40" orient="auto"><circle cx="15" cy="15" r="6"></circle></marker></defs><text x="321" y="80" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">1. 데이터 파일 업로드</text><line x1="75" y1="113" x2="567" y2="113" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><g></g><text x="572" y="128" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">2. 파일 임시 저장 및 설정 Form 표시</text><path d="M 572,161 C 632,151 632,191 572,181" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></path><text x="319" y="206" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">3. 컬럼 정보 및 상태값 입력/제출</text><line x1="75" y1="239" x2="562" y2="239" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="572" y="254" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">4. 설정 정보를 st.session_state에 저장</text><path d="M 572,287 C 632,277 632,317 572,307" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></path><text x="832" y="332" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">5. create_agent_executor() 호출</text><line x1="572" y1="375" x2="1092" y2="375" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="832" y="390" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">6. Agent Executor 인스턴스 반환</text><line x1="1092" y1="423" x2="572" y2="423" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="572" y="438" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">7. 챗봇 인터페이스 활성화</text><path d="M 572,471 C 632,461 632,501 572,491" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></path><text x="319" y="516" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">8. "데이터 요약해줘" 메시지 입력</text><line x1="75" y1="549" x2="562" y2="549" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><g><rect x="567" y="551" fill="#EDF2AE" stroke="#666" width="10" height="686" rx="0" ry="0" class="activation1"></rect></g><text x="835" y="564" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">9. agent_executor.invoke(prompt) 호출</text><line x1="577" y1="607" x2="1092" y2="607" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><g><rect x="1087" y="609" fill="#EDF2AE" stroke="#666" width="10" height="492" rx="0" ry="0" class="activation0"></rect></g><text x="1097" y="622" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">10. 사용자 의도 분석 ("데이터 요약")</text><path d="M 1097,655 C 1157,645 1157,685 1097,675" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></path><text x="1363" y="700" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">11. data_summarizer_tool 선택 및 호출</text><line x1="1097" y1="743" x2="1629" y2="743" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><g><rect x="1624" y="745" fill="#EDF2AE" stroke="#666" width="10" height="230" rx="0" ry="0" class="activation0"></rect></g><text x="1634" y="758" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">12. st.session_state에서 파일 경로/설정값 조회</text><path d="M 1634,791 C 1694,781 1694,821 1634,811" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></path><text x="1968" y="836" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">13. preprocess_and_summarize_data() 호출</text><line x1="1634" y1="879" x2="2302" y2="879" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><g><rect x="2297" y="881" fill="#EDF2AE" stroke="#666" width="10" height="46" rx="0" ry="0" class="activation0"></rect></g><text x="1966" y="894" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">14. 그룹 데이터 및 요약 DF 반환</text><line x1="2297" y1="927" x2="1634" y2="927" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="1361" y="942" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">15. 결과를 Dictionary 형태로 가공하여 반환</text><line x1="1624" y1="975" x2="1097" y2="975" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="1097" y="990" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">16. 도구 실행 결과(Observation) 확인</text><path d="M 1097,1023 C 1157,1013 1157,1053 1097,1043" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></path><text x="832" y="1068" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">17. 최종 답변("데이터 요약 결과입니다...") 생성 및 반환</text><line x1="1087" y1="1101" x2="577" y2="1101" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="577" y="1116" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">18. parse_and_display_tool_output() 호출</text><path d="M 577,1159 C 637,1149 637,1189 577,1179" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></path><text x="319" y="1204" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">19. 요약 테이블(st.dataframe) 및 텍스트(st.markdown) 표시</text><line x1="562" y1="1237" x2="75" y2="1237" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="319" y="1252" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">20. "100 그룹에 대해 와이블 분포로 B10 수명을 알려줘"</text><line x1="75" y1="1285" x2="562" y2="1285" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><g><rect x="567" y="1287" fill="#EDF2AE" stroke="#666" width="10" height="530" rx="0" ry="0" class="activation1"></rect></g><text x="835" y="1300" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">21. agent_executor.invoke(prompt) 호출</text><line x1="577" y1="1343" x2="1092" y2="1343" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><g><rect x="1087" y="1345" fill="#EDF2AE" stroke="#666" width="10" height="424" rx="0" ry="0" class="activation0"></rect></g><text x="1097" y="1358" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">22. 의도 분석 (상세 분석, 그룹='100', 분포='와이블', 계산='B10')</text><path d="M 1097,1401 C 1157,1391 1157,1431 1097,1421" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></path><text x="1363" y="1446" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">23. detailed_distribution_analyzer_tool 선택 및 호출</text><line x1="1097" y1="1489" x2="1629" y2="1489" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><g><rect x="1624" y="1491" fill="#EDF2AE" stroke="#666" width="10" height="230" rx="0" ry="0" class="activation0"></rect></g><text x="1968" y="1504" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">24. analyze_single_distribution(group='100', dist='Weibull_2P', b_lives=[10]) 호출</text><line x1="1634" y1="1547" x2="2302" y2="1547" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><g><rect x="2297" y="1549" fill="#EDF2AE" stroke="#666" width="10" height="46" rx="0" ry="0" class="activation0"></rect></g><text x="1966" y="1562" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">25. 분석 결과(Fitter 객체) 및 이미지 파일 생성 후 Fitter 객체 반환</text><line x1="2297" y1="1595" x2="1634" y2="1595" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="1634" y="1610" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">26. Fitter 객체에서 결과(모수, B10 수명)를 추출하여 DataFrame 생성</text><path d="M 1634,1643 C 1694,1633 1694,1673 1634,1663" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></path><text x="1361" y="1688" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">27. 결과(DataFrame, 이미지 경로, 텍스트)를 Dictionary 형태로 반환</text><line x1="1624" y1="1721" x2="1097" y2="1721" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="832" y="1736" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">28. 최종 답변("100 그룹의 와이블 분석 결과입니다...") 및 결과 반환</text><line x1="1087" y1="1769" x2="577" y2="1769" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="319" y="1784" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">29. 상세 분석 테이블(st.dataframe) 및 확률도(st.image) 표시</text><line x1="562" y1="1817" x2="75" y2="1817" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><g><rect x="0" y="1837" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="1869.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="75" dy="0">사용자</tspan></text></g><g><rect x="489" y="1837" fill="#eaeaea" stroke="#666" width="156" height="65" rx="3" ry="3" class="actor"></rect><text x="567" y="1869.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="567" dy="0">app.py (Streamlit UI)</tspan></text></g><g><rect x="997.5" y="1837" fill="#eaeaea" stroke="#666" width="189" height="65" rx="3" ry="3" class="actor"></rect><text x="1092" y="1869.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="1092" dy="0">agent.py (Agent Executor)</tspan></text></g><g><rect x="1531.5" y="1837" fill="#eaeaea" stroke="#666" width="195" height="65" rx="3" ry="3" class="actor"></rect><text x="1629" y="1869.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="1629" dy="0">tools.py (LangChain Tools)</tspan></text></g><g><rect x="2208" y="1837" fill="#eaeaea" stroke="#666" width="188" height="65" rx="3" ry="3" class="actor"></rect><text x="2302" y="1869.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="2302" dy="0">RA_code_v6.py (분석 엔진)</tspan></text></g></svg></pre>
<h3 id="작동-프로세스-설명">작동 프로세스 설명</h3>
<ol>
<li>
<p><strong>UI (<code>app.py</code>)와 사용자</strong>: 모든 상호작용은 Streamlit UI에서 시작됩니다. 사용자는 파일을 올리고, 설정을 입력하고, 채팅으로 분석을 요청합니다. <code>app.py</code>는 사용자의 입력을 에이전트에게 전달하고, 최종 결과물을 사용자에게 보여주는 창구입니다.</p>
</li>
<li>
<p><strong>상태 관리 (<code>st.session_state</code>)</strong>: <code>app.py</code>에서 생성된 핵심 데이터(파일 경로, 컬럼 설정 등)는 <code>st.session_state</code>에 저장됩니다. 이 정보는 세션 내내 유지되며, <code>tools.py</code>의 도구들이 분석에 필요한 데이터를 꺼내 쓰는 “공용 데이터 저장소” 역할을 합니다.</p>
</li>
<li>
<p><strong>에이전트 (<code>agent.py</code>)의 역할</strong>: 에이전트는 "지휘자"입니다. 사용자의 자연어 요청을 해석해서 어떤 도구를 어떤 입력값으로 실행해야 할지 결정합니다. 도구 실행이 끝나면 그 결과를 받아 사용자에게 친절하게 설명하는 최종 답변을 생성합니다.</p>
</li>
<li>
<p><strong>도구 (<code>tools.py</code>)와 분석 엔진 (<code>RA_code_v6.py</code>)</strong>: 도구는 "실무자"이고, 분석 엔진은 "계산기"입니다. 에이전트가 도구를 호출하면, <code>tools.py</code>는 <code>st.session_state</code>에서 데이터를 가져와 <code>RA_code_v6.py</code>의 분석 함수에게 전달합니다. <code>RA_code_v6.py</code>는 통계 계산과 그래프 생성을 수행하고, <code>tools.py</code>는 이 결과를 다시 에이전트가 이해하기 좋은 표준 형식으로 포장하여 전달합니다.</p>
</li>
</ol>
<p>이러한 역할 분담을 통해 각 파일은 자신의 책임에만 집중하여 체계적이고 확장 가능한 아키텍처를 구성합니다.</p>
</div>
</body>

</html>
