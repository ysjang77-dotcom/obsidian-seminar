<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>[Lab 8] 대화형 신뢰성 분석 AI 에이전트 상세 분석</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__html"><h1 id="lab-8-대화형-신뢰성-분석-ai-에이전트-상세-분석">[Lab 8] 대화형 신뢰성 분석 AI 에이전트 상세 분석</h1>
<p>이 문서는 <code>app_v2.py</code> 파일에 구현된 AI 에이전트의 아키텍처와 작동 흐름을 종합적으로 분석하고 설명합니다.</p>
<h2 id="app_v2.py-아키텍처-분석">1. <code>app_v2.py</code> 아키텍처 분석</h2>
<p>AI 에이전트는 <strong>“신뢰성 분석을 수행하는 똑똑한 AI 비서”</strong> 컨셉으로 설계되었습니다. 전체 구조는 크게 4가지 주요 부분으로 나눌 수 있습니다.</p>
<h3 id="핵심-분석-기능-core-functions">1.1. 핵심 분석 기능 (Core Functions)</h3>
<p>실제 데이터 분석을 수행하는 순수 Python 함수들입니다. AI 로직과 분리되어 있으며, 입력값에 따라 정해진 계산을 수행하고 결과를 반환하는 역할만 합니다. 코드에서는 <code>_func</code> 접미사를 붙여 AI 도구와 구분합니다.</p>
<ul>
<li><code>summarize_data_func(...)</code>: 데이터의 기본 통계 정보(샘플 수, 평균, 표준편차 등)를 계산합니다.</li>
<li><code>find_best_distribution_func(...)</code>: 여러 확률 분포를 데이터에 피팅하여 BIC 점수가 가장 낮은 최적의 분포를 찾습니다.</li>
<li><code>analyze_distribution_func(...)</code>: 특정 분포를 지정받아 상세 분석(파라미터, 신뢰구간, 확률지 그래프 등)을 수행합니다.</li>
</ul>
<blockquote>
<p><strong>비유</strong>: AI 비서가 사용하는 <code>망치</code>, <code>드라이버</code>, <code>계산기</code> 같은 개별 연장의 실제 기능입니다.</p>
</blockquote>
<h3 id="ai의-도구함-tool-decorator">1.2. AI의 도구함 (<code>@tool</code> Decorator)</h3>
<p>핵심 분석 함수들을 AI가 이해하고 사용할 수 있는 "스마트 도구"로 변환하는 역할을 합니다. <code>@tool</code> 데코레이터가 이 역할을 수행합니다.</p>
<pre class=" language-python"><code class="prism  language-python">@tool
<span class="token keyword">def</span> <span class="token function">summarize_data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">dict</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""업로드된 수명 데이터의 기본 통계 정보를 요약합니다..."""</span>
    <span class="token keyword">return</span> summarize_data_func<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
</code></pre>
<ul>
<li><strong><code>@tool</code></strong>: 이 함수가 AI가 사용할 수 있는 도구임을 선언하는 스티커입니다.</li>
<li><strong>Docstring (<code>"""..."""</code>)</strong>: <strong>AI를 위한 사용 설명서</strong>입니다. AI는 사용자의 질문 의도를 파악한 후, 이 설명서를 읽고 어떤 도구를 사용해야 할지 결정합니다.</li>
</ul>
<h3 id="자동-분석-워크플로우-langgraph">1.3. 자동 분석 워크플로우 (LangGraph)</h3>
<p>여러 분석 단계를 순서대로 실행해야 하는 복잡한 요청(“자동 분석”)을 처리하기 위한 **“자동화된 조립 라인”**입니다.</p>
<ul>
<li><strong>State (<code>GraphState</code>)</strong>: 워크플로우의 각 단계에서 생성되는 정보(데이터, 중간 결과, 최종 결과 등)를 저장하는 공유 데이터 바구니입니다.</li>
<li><strong>Nodes (작업대)</strong>: 각자의 작업을 수행하는 독립된 단계입니다.
<ol>
<li><code>summarize_data_node</code>: 데이터 요약</li>
<li><code>find_best_distribution_node</code>: 최적 분포 탐색</li>
<li><code>analyze_best_distribution_node</code>: 최적 분포 상세 분석</li>
<li><code>generate_report_node</code>: 모든 결과를 종합하여 최종 보고서 생성</li>
</ol>
</li>
<li><strong>Edges (컨베이어 벨트)</strong>: 노드들을 <code>1 → 2 → 3 → 4</code> 순서로 연결하여 작업의 흐름을 정의합니다.</li>
</ul>
<p>이 전체 워크플로우는 <code>run_full_analysis</code>라는 단일 도구로 포장되어 AI에게 제공됩니다.</p>
<h3 id="ai-두뇌-및-사용자-인터페이스-agent--streamlit">1.4. AI 두뇌 및 사용자 인터페이스 (Agent &amp; Streamlit)</h3>
<p>모든 구성 요소를 통합하여 사용자에게 서비스를 제공하는 부분입니다.</p>
<ul>
<li><strong>LLM (<code>ChatGoogleGenerativeAI</code>)</strong>: AI의 "두뇌"로, 사용자의 언어를 이해하고 어떤 도구를 사용할지 추론합니다.</li>
<li><strong>AgentExecutor (행동 매니저)</strong>: LLM의 결정을 받아 실제로 도구를 실행하고, 그 결과를 다시 LLM에게 전달하여 최종 응답을 만드는 역할을 합니다.</li>
<li><strong>Streamlit UI</strong>: 사용자가 파일을 업로드하고, AI와 채팅하며 분석 결과를 확인하는 웹 인터페이스입니다.</li>
</ul>
<hr>
<h2 id="에이전트-작동-흐름-분석-케이스별">2. 에이전트 작동 흐름 분석 (케이스별)</h2>
<p>이 문서는 <code>app_v2.py</code>로 구현된 AI 에이전트의 내부 작동 방식을 상세히 설명합니다. 사용자가 UI를 통해 특정 요청을 했을 때, 에이전트가 어떻게 이를 해석하고, 어떤 도구와 함수, 워크플로우를 사용하여 결과를 반환하는지 세 가지 대표적인 케이스를 통해 알아봅니다.</p>
<h3 id="전체-시스템-아키텍처">2.1. 전체 시스템 아키텍처</h3>
<p>에이전트의 전체 구조는 다음과 같이 시각화할 수 있습니다. 사용자의 요청은 UI를 통해 에이전트 실행기(AgentExecutor)로 전달되며, 실행기는 LLM(두뇌)의 판단에 따라 적절한 도구(Tool)나 워크플로우(LangGraph)를 실행하여 결과를 다시 UI로 반환합니다.</p>
<pre class=" language-mermaid"><svg id="mermaid-svg-bV84PKQys4m5SEUJ" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="475.2796936035156" style="max-width: 1331.0804443359375px;" viewBox="0 0 1331.0804443359375 475.2796936035156"><style>#mermaid-svg-bV84PKQys4m5SEUJ{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#000000;}#mermaid-svg-bV84PKQys4m5SEUJ .error-icon{fill:#552222;}#mermaid-svg-bV84PKQys4m5SEUJ .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-bV84PKQys4m5SEUJ .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-bV84PKQys4m5SEUJ .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-bV84PKQys4m5SEUJ .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-bV84PKQys4m5SEUJ .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-bV84PKQys4m5SEUJ .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-bV84PKQys4m5SEUJ .marker{fill:#666;stroke:#666;}#mermaid-svg-bV84PKQys4m5SEUJ .marker.cross{stroke:#666;}#mermaid-svg-bV84PKQys4m5SEUJ svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-bV84PKQys4m5SEUJ .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#000000;}#mermaid-svg-bV84PKQys4m5SEUJ .cluster-label text{fill:#333;}#mermaid-svg-bV84PKQys4m5SEUJ .cluster-label span{color:#333;}#mermaid-svg-bV84PKQys4m5SEUJ .label text,#mermaid-svg-bV84PKQys4m5SEUJ span{fill:#000000;color:#000000;}#mermaid-svg-bV84PKQys4m5SEUJ .node rect,#mermaid-svg-bV84PKQys4m5SEUJ .node circle,#mermaid-svg-bV84PKQys4m5SEUJ .node ellipse,#mermaid-svg-bV84PKQys4m5SEUJ .node polygon,#mermaid-svg-bV84PKQys4m5SEUJ .node path{fill:#eee;stroke:#999;stroke-width:1px;}#mermaid-svg-bV84PKQys4m5SEUJ .node .label{text-align:center;}#mermaid-svg-bV84PKQys4m5SEUJ .node.clickable{cursor:pointer;}#mermaid-svg-bV84PKQys4m5SEUJ .arrowheadPath{fill:#333333;}#mermaid-svg-bV84PKQys4m5SEUJ .edgePath .path{stroke:#666;stroke-width:1.5px;}#mermaid-svg-bV84PKQys4m5SEUJ .flowchart-link{stroke:#666;fill:none;}#mermaid-svg-bV84PKQys4m5SEUJ .edgeLabel{background-color:white;text-align:center;}#mermaid-svg-bV84PKQys4m5SEUJ .edgeLabel rect{opacity:0.5;background-color:white;fill:white;}#mermaid-svg-bV84PKQys4m5SEUJ .cluster rect{fill:hsl(210,66.6666666667%,95%);stroke:#26a;stroke-width:1px;}#mermaid-svg-bV84PKQys4m5SEUJ .cluster text{fill:#333;}#mermaid-svg-bV84PKQys4m5SEUJ .cluster span{color:#333;}#mermaid-svg-bV84PKQys4m5SEUJ div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(-160,0%,93.3333333333%);border:1px solid #26a;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-bV84PKQys4m5SEUJ:root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}#mermaid-svg-bV84PKQys4m5SEUJ flowchart{fill:apa;}</style><g><g class="output"><g class="clusters"><g class="cluster" id="flowchart-subGraph1-3969" style="opacity: 1;" transform="translate(551.837890625,237.6398468017578)"><rect width="1087.67578125" height="459.2796936035156" x="-543.837890625" y="-229.6398468017578"></rect><g class="label" transform="translate(0, -215.6398468017578)" id="mermaid-svg-bV84PKQys4m5SEUJText"><g transform="translate(-63.2890625,-13.359375)"><foreignObject width="126.578125" height="26.71875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">AI 에이전트 시스템</div></foreignObject></g></g></g><g class="cluster" id="flowchart-subGraph0-3970" style="opacity: 1;" transform="translate(1219.3781280517578,163.4210968017578)"><rect width="207.40469360351562" height="310.8421936035156" x="-103.70234680175781" y="-155.4210968017578"></rect><g class="label" transform="translate(0, -141.4210968017578)" id="mermaid-svg-bV84PKQys4m5SEUJText"><g transform="translate(-39.2109375,-13.359375)"><foreignObject width="78.421875" height="26.71875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">사용자 영역</div></foreignObject></g></g></g></g><g class="edgePaths"><g class="edgePath LS-A LE-B" style="opacity: 1;" id="L-A-B"><path class="path" d="M1219.3781280517578,79.71875L1219.3781280517578,118.078125L1219.8781280517578,156.93750305175791" marker-end="url(https://stackedit.io/app#arrowhead542)" style="fill:none"></path><defs><marker id="arrowhead542" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-B LE-C" style="opacity: 1;" id="L-B-C"><path class="path" d="M1176.7446026179828,200.07102238201716L1038.76953125,118.078125L701.88671875,65.97910538975785" marker-end="url(https://stackedit.io/app#arrowhead543)" style="fill:none"></path><defs><marker id="arrowhead543" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-C LE-D" style="opacity: 1;" id="L-C-D"><path class="path" d="M577.48046875,63.3928054822019L93.84765625,118.078125L267.1690885660849,201.7804718017578" marker-end="url(https://stackedit.io/app#arrowhead544)" style="fill:none"></path><defs><marker id="arrowhead544" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-D LE-C" style="opacity: 1;" id="L-D-C"><path class="path" d="M336.6068013978987,201.7804718017578L412.09765625,118.078125L577.48046875,73.22816383320175" marker-end="url(https://stackedit.io/app#arrowhead545)" style="fill:none"></path><defs><marker id="arrowhead545" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-C LE-E" style="opacity: 1;" id="L-C-E"><path class="path" d="M666.1683939873418,79.71875L709.66015625,118.078125L728.221043606777,188.97192514322285" marker-end="url(https://stackedit.io/app#arrowhead546)" style="fill:none"></path><defs><marker id="arrowhead546" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-E LE-F" style="opacity: 1;" id="L-E-F"><path class="path" d="M700.4615423821763,234.54826418393412L346.1875,318.8421936035156L346.1875,357.2015686035156L366.877284414557,395.5609436035156" marker-end="url(https://stackedit.io/app#arrowhead547)" style="fill:none"></path><defs><marker id="arrowhead547" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-E LE-G" style="opacity: 1;" id="L-E-G"><path class="path" d="M766.0780561659101,243.26647508408988L888.36328125,318.8421936035156L888.36328125,357.2015686035156L909.0530656645569,395.5609436035156" marker-end="url(https://stackedit.io/app#arrowhead548)" style="fill:none"></path><defs><marker id="arrowhead548" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-F LE-E" style="opacity: 1;" id="L-F-E"><path class="path" d="M392.075840585443,395.5609436035156L412.765625,357.2015686035156L412.765625,318.8421936035156L701.8802328609574,235.9669546627153" marker-end="url(https://stackedit.io/app#arrowhead549)" style="fill:none"></path><defs><marker id="arrowhead549" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-G LE-E" style="opacity: 1;" id="L-G-E"><path class="path" d="M934.3698971518987,395.5609436035156L955.25390625,357.2015686035156L955.25390625,318.8421936035156L769.8591747706149,239.485356479385" marker-end="url(https://stackedit.io/app#arrowhead550)" style="fill:none"></path><defs><marker id="arrowhead550" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-E LE-C" style="opacity: 1;" id="L-E-C"><path class="path" d="M754.6938532973217,196.62901259907977L800.10546875,118.078125L700.4002274525317,79.71875" marker-end="url(https://stackedit.io/app#arrowhead551)" style="fill:none"></path><defs><marker id="arrowhead551" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-C LE-D" style="opacity: 1;" id="L-C-D"><path class="path" d="M577.48046875,66.32600490568908L254.48828125,118.078125L302.21863322554475,201.7804718017578" marker-end="url(https://stackedit.io/app#arrowhead552)" style="fill:none"></path><defs><marker id="arrowhead552" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-D LE-C" style="opacity: 1;" id="L-D-C"><path class="path" d="M370.9949695702527,201.7804718017578L569.70703125,118.078125L613.1987935126582,79.71875" marker-end="url(https://stackedit.io/app#arrowhead553)" style="fill:none"></path><defs><marker id="arrowhead553" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-C LE-B" style="opacity: 1;" id="L-C-B"><path class="path" d="M701.88671875,70.20761193109765L916.91015625,118.078125L1169.1363607445842,207.6792642554157" marker-end="url(https://stackedit.io/app#arrowhead554)" style="fill:none"></path><defs><marker id="arrowhead554" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g></g><g class="edgeLabels"><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-A-B" class="edgeLabel L-LS-A' L-LE-B"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform="translate(1038.76953125,118.078125)"><g transform="translate(-36.90625,-13.359375)" class="label"><rect rx="0" ry="0" width="73.8125" height="26.71875"></rect><foreignObject width="73.8125" height="26.71875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-B-C" class="edgeLabel L-LS-B' L-LE-C">User Input</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform="translate(93.84765625,118.078125)"><g transform="translate(-59.28125,-13.359375)" class="label"><rect rx="0" ry="0" width="118.5625" height="26.71875"></rect><foreignObject width="118.5625" height="26.71875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-C-D" class="edgeLabel L-LS-C' L-LE-D">어떤 도구를 쓸까?</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform="translate(412.09765625,118.078125)"><g transform="translate(-56.25,-13.359375)" class="label"><rect rx="0" ry="0" width="112.5" height="26.71875"></rect><foreignObject width="112.5" height="26.71875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-D-C" class="edgeLabel L-LS-D' L-LE-C">Tool X를 사용해!</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform="translate(709.66015625,118.078125)"><g transform="translate(-38.59375,-13.359375)" class="label"><rect rx="0" ry="0" width="77.1875" height="26.71875"></rect><foreignObject width="77.1875" height="26.71875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-C-E" class="edgeLabel L-LS-C' L-LE-E">Tool X 실행</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform="translate(346.1875,357.2015686035156)"><g transform="translate(-14.7265625,-13.359375)" class="label"><rect rx="0" ry="0" width="29.453125" height="26.71875"></rect><foreignObject width="29.453125" height="26.71875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-E-F" class="edgeLabel L-LS-E' L-LE-F">실행</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform="translate(888.36328125,357.2015686035156)"><g transform="translate(-14.7265625,-13.359375)" class="label"><rect rx="0" ry="0" width="29.453125" height="26.71875"></rect><foreignObject width="29.453125" height="26.71875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-E-G" class="edgeLabel L-LS-E' L-LE-G">실행</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform="translate(412.765625,357.2015686035156)"><g transform="translate(-31.8515625,-13.359375)" class="label"><rect rx="0" ry="0" width="63.703125" height="26.71875"></rect><foreignObject width="63.703125" height="26.71875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-F-E" class="edgeLabel L-LS-F' L-LE-E">결과 반환</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform="translate(955.25390625,357.2015686035156)"><g transform="translate(-31.8515625,-13.359375)" class="label"><rect rx="0" ry="0" width="63.703125" height="26.71875"></rect><foreignObject width="63.703125" height="26.71875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-G-E" class="edgeLabel L-LS-G' L-LE-E">결과 반환</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform="translate(800.10546875,118.078125)"><g transform="translate(-31.8515625,-13.359375)" class="label"><rect rx="0" ry="0" width="63.703125" height="26.71875"></rect><foreignObject width="63.703125" height="26.71875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-E-C" class="edgeLabel L-LS-E' L-LE-C">최종 결과</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform="translate(254.48828125,118.078125)"><g transform="translate(-81.359375,-13.359375)" class="label"><rect rx="0" ry="0" width="162.71875" height="26.71875"></rect><foreignObject width="162.71875" height="26.71875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-C-D" class="edgeLabel L-LS-C' L-LE-D">결과를 어떻게 보여줄까?</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform="translate(569.70703125,118.078125)"><g transform="translate(-81.359375,-13.359375)" class="label"><rect rx="0" ry="0" width="162.71875" height="26.71875"></rect><foreignObject width="162.71875" height="26.71875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-D-C" class="edgeLabel L-LS-D' L-LE-C">이렇게 가공해서 보여줘!</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform="translate(916.91015625,118.078125)"><g transform="translate(-64.953125,-13.359375)" class="label"><rect rx="0" ry="0" width="129.90625" height="26.71875"></rect><foreignObject width="129.90625" height="26.71875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-C-B" class="edgeLabel L-LS-C' L-LE-B">Formatted Output</span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" style="opacity: 1;" id="flowchart-C-3946" transform="translate(639.68359375,56.359375)"><rect rx="0" ry="0" x="-62.203125" y="-23.359375" width="124.40625" height="46.71875" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-52.203125,-13.359375)"><foreignObject width="104.40625" height="26.71875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">AgentExecutor</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-D-3948" transform="translate(315.5390625,225.1398468017578)"><rect rx="0" ry="0" x="-57.4140625" y="-23.359375" width="114.828125" height="46.71875" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-47.4140625,-13.359375)"><foreignObject width="94.828125" height="26.71875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">LLM (Gemini)</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-E-3952" transform="translate(737.12890625,225.1398468017578)"><polygon points="46.07578125,0 92.1515625,-46.07578125 46.07578125,-92.1515625 0,-46.07578125" transform="translate(-46.07578125,46.07578125)" class="label-container"></polygon><g class="label" transform="translate(0,0)"><g transform="translate(-17.8359375,-13.359375)"><foreignObject width="35.671875" height="26.71875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Tools</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-F-3954" transform="translate(379.4765625,418.9203186035156)"><rect rx="0" ry="0" x="-63.21875" y="-23.359375" width="126.4375" height="46.71875" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-53.21875,-13.359375)"><foreignObject width="106.4375" height="26.71875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Core Functions</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-G-3956" transform="translate(921.65234375,418.9203186035156)"><rect rx="0" ry="0" x="-84.0546875" y="-23.359375" width="168.109375" height="46.71875" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-74.0546875,-13.359375)"><foreignObject width="148.109375" height="26.71875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">LangGraph Workflow</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-B-3944" transform="translate(1219.3781280517578,225.1398468017578)"><polygon points="68.70234375,0 137.4046875,-68.70234375 68.70234375,-137.4046875 0,-68.70234375" transform="translate(-68.70234375,68.70234375)" class="label-container"></polygon><g class="label" transform="translate(0,0)"><g transform="translate(-42.9765625,-13.359375)"><foreignObject width="85.953125" height="26.71875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Streamlit UI</div></foreignObject></g></g></g><g class="node default" style="opacity: 1;" id="flowchart-A-3943" transform="translate(1219.3781280517578,56.359375)"><rect rx="0" ry="0" x="-25.8984375" y="-23.359375" width="51.796875" height="46.71875" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-15.8984375,-13.359375)"><foreignObject width="31.796875" height="26.71875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">User</div></foreignObject></g></g></g></g></g></g></svg></pre>
<h3 id="case-1-간단한-단일-도구-호출-데이터-요약">2.2. Case 1: 간단한 단일 도구 호출 (데이터 요약)</h3>
<p>사용자가 데이터의 기본적인 통계 정보를 요청하는 가장 간단한 시나리오입니다.</p>
<p><strong>요청</strong>: <code>"데이터 요약해줘"</code></p>
<h4 id="상세-작동-절차">상세 작동 절차</h4>
<ol>
<li><strong>사용자 입력</strong>: 사용자가 Streamlit 채팅창에 "데이터 요약해줘"를 입력합니다.</li>
<li><strong>에이전트 실행</strong>: <code>AgentExecutor</code>가 입력을 받아 LLM(Gemini)에게 전달합니다. 이 때, 시스템 프롬프트와 사용 가능한 도구 목록(<code>summarize_data</code>, <code>find_best_distribution</code> 등)과 각 도구의 설명서(docstring)를 함께 보냅니다.</li>
<li><strong>LLM의 추론</strong>: LLM은 “요약"이라는 키워드와 <code>summarize_data</code> 도구의 설명서(”…기본 통계 정보를 요약합니다.")가 가장 일치한다고 판단합니다.</li>
<li><strong>도구 호출 결정</strong>: LLM은 <code>AgentExecutor</code>에게 <code>summarize_data</code> 도구를 호출하라고 지시합니다.</li>
<li><strong>함수 실행</strong>: <code>summarize_data</code> 도구는 내부적으로 핵심 로직 함수인 <code>summarize_data_func</code>를 실행합니다. 이 함수는 Streamlit의 세션 상태(<code>st.session_state</code>)에 저장된 <code>failures</code>와 <code>right_censored</code> 데이터를 사용하여 통계치를 계산하고, 결과를 딕셔너리 형태로 반환합니다.</li>
<li><strong>결과 가공</strong>: <code>AgentExecutor</code>는 함수로부터 받은 딕셔너리 결과를 다시 LLM에게 전달합니다.</li>
<li><strong>최종 응답 생성</strong>: LLM은 이 딕셔너리를 사람이 보기 좋은 마크다운 테이블 형식으로 변환하여 최종 응답을 생성합니다.</li>
<li><strong>UI 출력</strong>: 가공된 최종 응답이 Streamlit UI에 스트리밍되어 사용자에게 표시됩니다.</li>
</ol>
<h4 id="시각화-sequence-diagram">시각화 (Sequence Diagram)</h4>
<pre class=" language-mermaid"><svg id="mermaid-svg-0uuEUiB0vNmgHrsu" width="100%" xmlns="http://www.w3.org/2000/svg" height="797" style="max-width: 1702.5px;" viewBox="-50 -10 1702.5 797"><style>#mermaid-svg-0uuEUiB0vNmgHrsu{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#000000;}#mermaid-svg-0uuEUiB0vNmgHrsu .error-icon{fill:#552222;}#mermaid-svg-0uuEUiB0vNmgHrsu .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-0uuEUiB0vNmgHrsu .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-0uuEUiB0vNmgHrsu .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-0uuEUiB0vNmgHrsu .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-0uuEUiB0vNmgHrsu .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-0uuEUiB0vNmgHrsu .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-0uuEUiB0vNmgHrsu .marker{fill:#666;stroke:#666;}#mermaid-svg-0uuEUiB0vNmgHrsu .marker.cross{stroke:#666;}#mermaid-svg-0uuEUiB0vNmgHrsu svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-0uuEUiB0vNmgHrsu .actor{stroke:hsl(0,0%,83%);fill:#eee;}#mermaid-svg-0uuEUiB0vNmgHrsu text.actor > tspan{fill:#333;stroke:none;}#mermaid-svg-0uuEUiB0vNmgHrsu .actor-line{stroke:#666;}#mermaid-svg-0uuEUiB0vNmgHrsu .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333;}#mermaid-svg-0uuEUiB0vNmgHrsu .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#333;}#mermaid-svg-0uuEUiB0vNmgHrsu #arrowhead path{fill:#333;stroke:#333;}#mermaid-svg-0uuEUiB0vNmgHrsu .sequenceNumber{fill:white;}#mermaid-svg-0uuEUiB0vNmgHrsu #sequencenumber{fill:#333;}#mermaid-svg-0uuEUiB0vNmgHrsu #crosshead path{fill:#333;stroke:#333;}#mermaid-svg-0uuEUiB0vNmgHrsu .messageText{fill:#333;stroke:#333;}#mermaid-svg-0uuEUiB0vNmgHrsu .labelBox{stroke:hsl(0,0%,83%);fill:#eee;}#mermaid-svg-0uuEUiB0vNmgHrsu .labelText,#mermaid-svg-0uuEUiB0vNmgHrsu .labelText > tspan{fill:#333;stroke:none;}#mermaid-svg-0uuEUiB0vNmgHrsu .loopText,#mermaid-svg-0uuEUiB0vNmgHrsu .loopText > tspan{fill:#333;stroke:none;}#mermaid-svg-0uuEUiB0vNmgHrsu .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:hsl(0,0%,83%);fill:hsl(0,0%,83%);}#mermaid-svg-0uuEUiB0vNmgHrsu .note{stroke:hsl(60,100%,23.3333333333%);fill:#ffa;}#mermaid-svg-0uuEUiB0vNmgHrsu .noteText,#mermaid-svg-0uuEUiB0vNmgHrsu .noteText > tspan{fill:#333;stroke:none;}#mermaid-svg-0uuEUiB0vNmgHrsu .activation0{fill:#f4f4f4;stroke:#666;}#mermaid-svg-0uuEUiB0vNmgHrsu .activation1{fill:#f4f4f4;stroke:#666;}#mermaid-svg-0uuEUiB0vNmgHrsu .activation2{fill:#f4f4f4;stroke:#666;}#mermaid-svg-0uuEUiB0vNmgHrsu:root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}#mermaid-svg-0uuEUiB0vNmgHrsu sequence{fill:apa;}</style><g></g><g><line id="actor48" x1="75" y1="5" x2="75" y2="786" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="75" dy="0">사용자</tspan></text></g><g><line id="actor49" x1="307" y1="5" x2="307" y2="786" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="232" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="307" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="307" dy="0">Streamlit UI</tspan></text></g><g><line id="actor50" x1="639" y1="5" x2="639" y2="786" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="564" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="639" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="639" dy="0">AgentExecutor</tspan></text></g><g><line id="actor51" x1="973" y1="5" x2="973" y2="786" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="898" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="973" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="973" dy="0">Gemini (두뇌)</tspan></text></g><g><line id="actor52" x1="1182.5" y1="5" x2="1182.5" y2="786" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="1098" y="0" fill="#eaeaea" stroke="#666" width="169" height="65" rx="3" ry="3" class="actor"></rect><text x="1182.5" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="1182.5" dy="0">Tool: summarize_data</tspan></text></g><g><line id="actor53" x1="1499.5" y1="5" x2="1499.5" y2="786" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="1396.5" y="0" fill="#eaeaea" stroke="#666" width="206" height="65" rx="3" ry="3" class="actor"></rect><text x="1499.5" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="1499.5" dy="0">Func: summarize_data_func</tspan></text></g><defs><marker id="arrowhead" refX="9" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z"></path></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4"><path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"></path><path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><defs><marker id="filled-head" refX="18" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><defs><marker id="sequencenumber" refX="15" refY="15" markerWidth="60" markerHeight="40" orient="auto"><circle cx="15" cy="15" r="6"></circle></marker></defs><text x="191" y="80" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">"데이터 요약해줘"</text><line x1="75" y1="123" x2="307" y2="123" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="473" y="138" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">agent_executor.stream(input="...")</text><line x1="307" y1="181" x2="639" y2="181" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="806" y="196" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">어떤 도구를 사용할까? (prompt, tools)</text><line x1="639" y1="239" x2="973" y2="239" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="806" y="254" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">summarize_data() 도구를 사용해.</text><line x1="973" y1="297" x2="639" y2="297" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="911" y="312" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">summarize_data() 호출</text><line x1="639" y1="355" x2="1182.5" y2="355" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="1341" y="370" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">summarize_data_func(data) 실행</text><line x1="1182.5" y1="413" x2="1499.5" y2="413" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="1341" y="428" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">결과 반환 (dict)</text><line x1="1499.5" y1="461" x2="1182.5" y2="461" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="911" y="476" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">최종 결과 (dict)</text><line x1="1182.5" y1="509" x2="639" y2="509" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="806" y="524" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">이 결과를 어떻게 보여줄까? (result)</text><line x1="639" y1="557" x2="973" y2="557" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="806" y="572" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">마크다운 테이블로 가공된 텍스트</text><line x1="973" y1="605" x2="639" y2="605" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="473" y="620" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">최종 응답 스트리밍</text><line x1="639" y1="653" x2="307" y2="653" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="191" y="668" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">데이터 요약 테이블 표시</text><line x1="307" y1="701" x2="75" y2="701" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><g><rect x="0" y="721" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="753.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="75" dy="0">사용자</tspan></text></g><g><rect x="232" y="721" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="307" y="753.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="307" dy="0">Streamlit UI</tspan></text></g><g><rect x="564" y="721" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="639" y="753.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="639" dy="0">AgentExecutor</tspan></text></g><g><rect x="898" y="721" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="973" y="753.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="973" dy="0">Gemini (두뇌)</tspan></text></g><g><rect x="1098" y="721" fill="#eaeaea" stroke="#666" width="169" height="65" rx="3" ry="3" class="actor"></rect><text x="1182.5" y="753.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="1182.5" dy="0">Tool: summarize_data</tspan></text></g><g><rect x="1396.5" y="721" fill="#eaeaea" stroke="#666" width="206" height="65" rx="3" ry="3" class="actor"></rect><text x="1499.5" y="753.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="1499.5" dy="0">Func: summarize_data_func</tspan></text></g></svg></pre>
<h3 id="case-2-파라미터가-있는-도구-호출-특정-분포-분석">2.3. Case 2: 파라미터가 있는 도구 호출 (특정 분포 분석)</h3>
<p>사용자가 특정 분포를 지정하여 분석을 요청하는 시나리오입니다. 에이전트가 사용자의 언어에서 파라미터(<code>dist_name</code>)를 추출하는 과정이 포함됩니다.</p>
<p><strong>요청</strong>: <code>"Weibull 분포로 분석해줘"</code></p>
<h4 id="상세-작동-절차-1">상세 작동 절차</h4>
<ol>
<li><strong>사용자 입력</strong>: 사용자가 "Weibull 분포로 분석해줘"를 입력합니다.</li>
<li><strong>에이전트 실행</strong>: <code>AgentExecutor</code>가 입력을 받아 LLM에게 전달합니다.</li>
<li><strong>LLM의 추론</strong>: LLM은 "Weibull 분포"라는 구체적인 대상과 "분석"이라는 행위를 인식합니다. <code>analyze_distribution</code> 도구의 설명서(“특정 확률 분포에 대한 상세 분석을 수행합니다.”)와 파라미터(<code>dist_name: str</code>)를 보고 이 도구가 가장 적합하다고 판단합니다. 또한, "Weibull"을 <code>dist_name</code> 파라미터의 값으로 추출합니다.</li>
<li><strong>도구 호출 결정</strong>: LLM은 <code>AgentExecutor</code>에게 <code>analyze_distribution(dist_name='Weibull')</code>을 호출하라고 지시합니다.</li>
<li><strong>함수 실행</strong>: <code>analyze_distribution</code> 도구는 내부적으로 <code>analyze_distribution_func</code>를 실행합니다. 이 때 <code>dist_name</code>으로 'Weibull’을 전달합니다. 함수 내에서는 'Weibull’을 <code>Weibull_2P</code>와 같이 내부에서 사용하는 이름으로 변환하여 <code>reliability</code> 라이브러리로 상세 분석을 수행합니다. 분석 결과(파라미터 테이블, B-Life 테이블, 확률지 이미지 등)는 딕셔너리 형태로 반환됩니다.</li>
<li><strong>결과 처리</strong>: <code>AgentExecutor</code>는 결과 딕셔너리를 받습니다. 이 경우, 결과에는 텍스트(테이블)와 이미지 데이터가 섞여 있습니다.</li>
<li><strong>최종 응답 생성 및 UI 출력</strong>: 코드에 정의된 스트리밍 로직에 따라, 결과 딕셔너리의 내용물을 종류별로 나누어 UI에 직접 렌더링합니다.
<ul>
<li><code>parameter_table</code>, <code>b_life_table</code> 등은 <code>st.dataframe()</code>으로 테이블을 그립니다.</li>
<li><code>probability_plot</code>은 <code>st.image()</code>로 이미지를 표시합니다.</li>
</ul>
</li>
</ol>
<h4 id="시각화-sequence-diagram-1">시각화 (Sequence Diagram)</h4>
<pre class=" language-mermaid"><svg id="mermaid-svg-aSSjg0eAMPjJ33QO" width="100%" xmlns="http://www.w3.org/2000/svg" height="701" style="max-width: 2297px;" viewBox="-50 -10 2297 701"><style>#mermaid-svg-aSSjg0eAMPjJ33QO{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#000000;}#mermaid-svg-aSSjg0eAMPjJ33QO .error-icon{fill:#552222;}#mermaid-svg-aSSjg0eAMPjJ33QO .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-aSSjg0eAMPjJ33QO .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-aSSjg0eAMPjJ33QO .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-aSSjg0eAMPjJ33QO .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-aSSjg0eAMPjJ33QO .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-aSSjg0eAMPjJ33QO .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-aSSjg0eAMPjJ33QO .marker{fill:#666;stroke:#666;}#mermaid-svg-aSSjg0eAMPjJ33QO .marker.cross{stroke:#666;}#mermaid-svg-aSSjg0eAMPjJ33QO svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-aSSjg0eAMPjJ33QO .actor{stroke:hsl(0,0%,83%);fill:#eee;}#mermaid-svg-aSSjg0eAMPjJ33QO text.actor > tspan{fill:#333;stroke:none;}#mermaid-svg-aSSjg0eAMPjJ33QO .actor-line{stroke:#666;}#mermaid-svg-aSSjg0eAMPjJ33QO .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333;}#mermaid-svg-aSSjg0eAMPjJ33QO .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#333;}#mermaid-svg-aSSjg0eAMPjJ33QO #arrowhead path{fill:#333;stroke:#333;}#mermaid-svg-aSSjg0eAMPjJ33QO .sequenceNumber{fill:white;}#mermaid-svg-aSSjg0eAMPjJ33QO #sequencenumber{fill:#333;}#mermaid-svg-aSSjg0eAMPjJ33QO #crosshead path{fill:#333;stroke:#333;}#mermaid-svg-aSSjg0eAMPjJ33QO .messageText{fill:#333;stroke:#333;}#mermaid-svg-aSSjg0eAMPjJ33QO .labelBox{stroke:hsl(0,0%,83%);fill:#eee;}#mermaid-svg-aSSjg0eAMPjJ33QO .labelText,#mermaid-svg-aSSjg0eAMPjJ33QO .labelText > tspan{fill:#333;stroke:none;}#mermaid-svg-aSSjg0eAMPjJ33QO .loopText,#mermaid-svg-aSSjg0eAMPjJ33QO .loopText > tspan{fill:#333;stroke:none;}#mermaid-svg-aSSjg0eAMPjJ33QO .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:hsl(0,0%,83%);fill:hsl(0,0%,83%);}#mermaid-svg-aSSjg0eAMPjJ33QO .note{stroke:hsl(60,100%,23.3333333333%);fill:#ffa;}#mermaid-svg-aSSjg0eAMPjJ33QO .noteText,#mermaid-svg-aSSjg0eAMPjJ33QO .noteText > tspan{fill:#333;stroke:none;}#mermaid-svg-aSSjg0eAMPjJ33QO .activation0{fill:#f4f4f4;stroke:#666;}#mermaid-svg-aSSjg0eAMPjJ33QO .activation1{fill:#f4f4f4;stroke:#666;}#mermaid-svg-aSSjg0eAMPjJ33QO .activation2{fill:#f4f4f4;stroke:#666;}#mermaid-svg-aSSjg0eAMPjJ33QO:root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}#mermaid-svg-aSSjg0eAMPjJ33QO sequence{fill:apa;}</style><g></g><g><line id="actor54" x1="75" y1="5" x2="75" y2="690" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="75" dy="0">사용자</tspan></text></g><g><line id="actor55" x1="514" y1="5" x2="514" y2="690" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="439" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="514" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="514" dy="0">Streamlit UI</tspan></text></g><g><line id="actor56" x1="846" y1="5" x2="846" y2="690" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="771" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="846" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="846" dy="0">AgentExecutor</tspan></text></g><g><line id="actor57" x1="1334" y1="5" x2="1334" y2="690" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="1259" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="1334" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="1334" dy="0">Gemini (두뇌)</tspan></text></g><g><line id="actor58" x1="1555.5" y1="5" x2="1555.5" y2="690" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="1459" y="0" fill="#eaeaea" stroke="#666" width="193" height="65" rx="3" ry="3" class="actor"></rect><text x="1555.5" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="1555.5" dy="0">Tool: analyze_distribution</tspan></text></g><g><line id="actor59" x1="2081.5" y1="5" x2="2081.5" y2="690" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="1966" y="0" fill="#eaeaea" stroke="#666" width="231" height="65" rx="3" ry="3" class="actor"></rect><text x="2081.5" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="2081.5" dy="0">Func: analyze_distribution_func</tspan></text></g><defs><marker id="arrowhead" refX="9" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z"></path></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4"><path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"></path><path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><defs><marker id="filled-head" refX="18" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><defs><marker id="sequencenumber" refX="15" refY="15" markerWidth="60" markerHeight="40" orient="auto"><circle cx="15" cy="15" r="6"></circle></marker></defs><text x="295" y="80" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">"Weibull 분포로 분석해줘"</text><line x1="75" y1="123" x2="514" y2="123" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="680" y="138" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">agent_executor.stream(input="...")</text><line x1="514" y1="181" x2="846" y2="181" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="1090" y="196" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">어떤 도구를 사용할까? (prompt, tools)</text><line x1="846" y1="239" x2="1334" y2="239" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="1090" y="254" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">analyze_distribution(dist_name='Weibull') 도구를 사용해.</text><line x1="1334" y1="297" x2="846" y2="297" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="1201" y="312" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">analyze_distribution(dist_name='Weibull') 호출</text><line x1="846" y1="355" x2="1555.5" y2="355" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="1819" y="370" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">analyze_distribution_func(data, dist_name='Weibull', ...) 실행</text><line x1="1555.5" y1="413" x2="2081.5" y2="413" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="1819" y="428" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">분석 결과 반환 (dict with tables, plot)</text><line x1="2081.5" y1="461" x2="1555.5" y2="461" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="1201" y="476" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">최종 결과 (dict)</text><line x1="1555.5" y1="509" x2="846" y2="509" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="680" y="524" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">결과 딕셔너리 스트리밍</text><line x1="846" y1="557" x2="514" y2="557" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="295" y="572" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">파라미터 테이블, B-Life 테이블, 확률지 이미지 등 표시</text><line x1="514" y1="605" x2="75" y2="605" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><g><rect x="0" y="625" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="657.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="75" dy="0">사용자</tspan></text></g><g><rect x="439" y="625" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="514" y="657.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="514" dy="0">Streamlit UI</tspan></text></g><g><rect x="771" y="625" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="846" y="657.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="846" dy="0">AgentExecutor</tspan></text></g><g><rect x="1259" y="625" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="1334" y="657.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="1334" dy="0">Gemini (두뇌)</tspan></text></g><g><rect x="1459" y="625" fill="#eaeaea" stroke="#666" width="193" height="65" rx="3" ry="3" class="actor"></rect><text x="1555.5" y="657.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="1555.5" dy="0">Tool: analyze_distribution</tspan></text></g><g><rect x="1966" y="625" fill="#eaeaea" stroke="#666" width="231" height="65" rx="3" ry="3" class="actor"></rect><text x="2081.5" y="657.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="2081.5" dy="0">Func: analyze_distribution_func</tspan></text></g></svg></pre>
<h3 id="case-3-langgraph-워크플로우-호출-전체-자동-분석">2.4. Case 3: LangGraph 워크플로우 호출 (전체 자동 분석)</h3>
<p>사용자가 포괄적인 분석을 요청하여, 여러 단계의 분석이 순차적으로 실행되는 가장 복잡한 시나리오입니다.</p>
<p><strong>요청</strong>: <code>"자동 분석 실행"</code></p>
<h4 id="상세-작동-절차-2">상세 작동 절차</h4>
<ol>
<li><strong>사용자 입력</strong>: 사용자가 "자동 분석 실행"을 입력합니다.</li>
<li><strong>에이전트 실행 및 LLM 추론</strong>: <code>AgentExecutor</code>가 입력을 LLM에게 전달합니다. LLM은 "자동 분석"이라는 요청이 <code>run_full_analysis</code> 도구의 설명서(“전체 자동 분석을 수행하고 최종 보고서를 생성합니다.”)와 가장 일치한다고 판단합니다.</li>
<li><strong>워크플로우 도구 호출</strong>: LLM은 <code>run_full_analysis</code> 도구를 호출하라고 지시합니다.</li>
<li><strong>LangGraph 실행</strong>:
<ul>
<li><code>run_full_analysis</code> 도구는 내부적으로 <code>run_full_analysis_func</code> 함수를 호출합니다.</li>
<li>이 함수는 미리 정의된 **LangGraph 워크플로우(<code>app_graph</code>)**를 <code>invoke</code> 메소드로 실행시킵니다.</li>
<li><strong>Graph State</strong>라는 공유 데이터 바구니가 생성되고, 초기 데이터(failures, right_censored 등)가 담깁니다.</li>
</ul>
</li>
<li><strong>노드 순차 실행</strong>:
<ul>
<li><strong>(1) <code>summarize_data_node</code></strong>: 데이터 요약 노드가 실행되고, 결과가 State에 추가됩니다.</li>
<li><strong>(2) <code>find_best_distribution_node</code></strong>: 최적 분포 탐색 노드가 실행되고, 최적 분포 이름과 BIC 테이블이 State에 추가됩니다.</li>
<li><strong>(3) <code>analyze_best_distribution_node</code></strong>: 위에서 찾은 최적 분포로 상세 분석 노드가 실행되고, 분석 결과(테이블, 이미지)가 State에 추가됩니다.</li>
<li><strong>(4) <code>generate_report_node</code></strong>: 보고서 생성 노드가 State에 축적된 모든 정보를 종합하여 하나의 구조화된 마크다운 보고서를 생성하고, State에 최종 저장합니다.</li>
</ul>
</li>
<li><strong>워크플로우 결과 반환</strong>: LangGraph는 모든 노드 실행을 마친 후, 최종 정보가 담긴 State를 <code>run_full_analysis_func</code>에 반환합니다.</li>
<li><strong>최종 결과 추출</strong>: 함수는 최종 State에서 <code>final_report</code>(마크다운 텍스트)와 <code>probability_plot</code>(이미지)을 추출하여 딕셔너리 형태로 <code>AgentExecutor</code>에게 반환합니다.</li>
<li><strong>UI 출력</strong>: <code>AgentExecutor</code>는 이 딕셔너리를 받아 UI에 전달하고, UI는 보고서 텍스트와 이미지를 화면에 표시합니다.</li>
</ol>
<h4 id="시각화-sequence-diagram-2">시각화 (Sequence Diagram)</h4>
<pre class=" language-mermaid"><svg id="mermaid-svg-npb5N4M7AOeYxP0A" width="100%" xmlns="http://www.w3.org/2000/svg" height="1112" style="max-width: 1876.5px;" viewBox="-50 -10 1876.5 1112"><style>#mermaid-svg-npb5N4M7AOeYxP0A{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#000000;}#mermaid-svg-npb5N4M7AOeYxP0A .error-icon{fill:#552222;}#mermaid-svg-npb5N4M7AOeYxP0A .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-npb5N4M7AOeYxP0A .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-npb5N4M7AOeYxP0A .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-npb5N4M7AOeYxP0A .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-npb5N4M7AOeYxP0A .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-npb5N4M7AOeYxP0A .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-npb5N4M7AOeYxP0A .marker{fill:#666;stroke:#666;}#mermaid-svg-npb5N4M7AOeYxP0A .marker.cross{stroke:#666;}#mermaid-svg-npb5N4M7AOeYxP0A svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-npb5N4M7AOeYxP0A .actor{stroke:hsl(0,0%,83%);fill:#eee;}#mermaid-svg-npb5N4M7AOeYxP0A text.actor > tspan{fill:#333;stroke:none;}#mermaid-svg-npb5N4M7AOeYxP0A .actor-line{stroke:#666;}#mermaid-svg-npb5N4M7AOeYxP0A .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333;}#mermaid-svg-npb5N4M7AOeYxP0A .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#333;}#mermaid-svg-npb5N4M7AOeYxP0A #arrowhead path{fill:#333;stroke:#333;}#mermaid-svg-npb5N4M7AOeYxP0A .sequenceNumber{fill:white;}#mermaid-svg-npb5N4M7AOeYxP0A #sequencenumber{fill:#333;}#mermaid-svg-npb5N4M7AOeYxP0A #crosshead path{fill:#333;stroke:#333;}#mermaid-svg-npb5N4M7AOeYxP0A .messageText{fill:#333;stroke:#333;}#mermaid-svg-npb5N4M7AOeYxP0A .labelBox{stroke:hsl(0,0%,83%);fill:#eee;}#mermaid-svg-npb5N4M7AOeYxP0A .labelText,#mermaid-svg-npb5N4M7AOeYxP0A .labelText > tspan{fill:#333;stroke:none;}#mermaid-svg-npb5N4M7AOeYxP0A .loopText,#mermaid-svg-npb5N4M7AOeYxP0A .loopText > tspan{fill:#333;stroke:none;}#mermaid-svg-npb5N4M7AOeYxP0A .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:hsl(0,0%,83%);fill:hsl(0,0%,83%);}#mermaid-svg-npb5N4M7AOeYxP0A .note{stroke:hsl(60,100%,23.3333333333%);fill:#ffa;}#mermaid-svg-npb5N4M7AOeYxP0A .noteText,#mermaid-svg-npb5N4M7AOeYxP0A .noteText > tspan{fill:#333;stroke:none;}#mermaid-svg-npb5N4M7AOeYxP0A .activation0{fill:#f4f4f4;stroke:#666;}#mermaid-svg-npb5N4M7AOeYxP0A .activation1{fill:#f4f4f4;stroke:#666;}#mermaid-svg-npb5N4M7AOeYxP0A .activation2{fill:#f4f4f4;stroke:#666;}#mermaid-svg-npb5N4M7AOeYxP0A:root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}#mermaid-svg-npb5N4M7AOeYxP0A sequence{fill:apa;}</style><g></g><g><line id="actor60" x1="75" y1="5" x2="75" y2="1101" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="75" dy="0">사용자</tspan></text></g><g><line id="actor61" x1="405" y1="5" x2="405" y2="1101" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="330" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="405" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="405" dy="0">Streamlit UI</tspan></text></g><g><line id="actor62" x1="737" y1="5" x2="737" y2="1101" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="662" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="737" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="737" dy="0">AgentExecutor</tspan></text></g><g><line id="actor63" x1="1071" y1="5" x2="1071" y2="1101" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="996" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="1071" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="1071" dy="0">Gemini (두뇌)</tspan></text></g><g><line id="actor64" x1="1281.5" y1="5" x2="1281.5" y2="1101" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="1196" y="0" fill="#eaeaea" stroke="#666" width="171" height="65" rx="3" ry="3" class="actor"></rect><text x="1281.5" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="1281.5" dy="0">Tool: run_full_analysis</tspan></text></g><g><line id="actor65" x1="1619.5" y1="5" x2="1619.5" y2="1101" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="1540.5" y="0" fill="#eaeaea" stroke="#666" width="158" height="65" rx="3" ry="3" class="actor"></rect><text x="1619.5" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="1619.5" dy="0">LangGraph Workflow</tspan></text></g><defs><marker id="arrowhead" refX="9" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z"></path></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4"><path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"></path><path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><defs><marker id="filled-head" refX="18" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><defs><marker id="sequencenumber" refX="15" refY="15" markerWidth="60" markerHeight="40" orient="auto"><circle cx="15" cy="15" r="6"></circle></marker></defs><text x="240" y="80" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">"자동 분석 실행"</text><line x1="75" y1="123" x2="405" y2="123" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="571" y="138" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">agent_executor.stream(input="...")</text><line x1="405" y1="181" x2="737" y2="181" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="904" y="196" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">어떤 도구를 사용할까? (prompt, tools)</text><line x1="737" y1="239" x2="1071" y2="239" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="904" y="254" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">run_full_analysis() 도구를 사용해.</text><line x1="1071" y1="297" x2="737" y2="297" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="1009" y="312" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">run_full_analysis() 호출</text><line x1="737" y1="355" x2="1281.5" y2="355" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="1451" y="419" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">app_graph.invoke(initial_state)</text><line x1="1281.5" y1="462" x2="1619.5" y2="462" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="1620" y="477" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">1. summarize_data_node 실행</text><path d="M 1619.5,520 C 1679.5,510 1679.5,550 1619.5,540" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></path><text x="1620" y="565" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">2. find_best_distribution_node 실행</text><path d="M 1619.5,608 C 1679.5,598 1679.5,638 1619.5,628" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></path><text x="1620" y="653" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">3. analyze_best_distribution_node 실행</text><path d="M 1619.5,696 C 1679.5,686 1679.5,726 1619.5,716" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></path><text x="1620" y="741" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">4. generate_report_node 실행</text><path d="M 1619.5,784 C 1679.5,774 1679.5,814 1619.5,804" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></path><text x="1451" y="829" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">최종 보고서와 이미지가 담긴 State 반환</text><line x1="1619.5" y1="862" x2="1281.5" y2="862" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><g><line x1="1271.5" y1="365" x2="1776.5" y2="365" class="loopLine"></line><line x1="1776.5" y1="365" x2="1776.5" y2="872" class="loopLine"></line><line x1="1271.5" y1="872" x2="1776.5" y2="872" class="loopLine"></line><line x1="1271.5" y1="365" x2="1271.5" y2="872" class="loopLine"></line><polygon points="1271.5,365 1321.5,365 1321.5,378 1313.1,385 1271.5,385" class="labelBox"></polygon><text x="1297" y="378" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="labelText" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">loop</text><text x="1549" y="383" text-anchor="middle" class="loopText" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;"><tspan x="1549">["LangGraph 내부 실행"]</tspan></text></g><text x="1009" y="887" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">최종 결과 (dict with report, plot)</text><line x1="1281.5" y1="920" x2="737" y2="920" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="571" y="935" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">결과 딕셔너리 스트리밍</text><line x1="737" y1="968" x2="405" y2="968" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="240" y="983" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">최종 분석 보고서와 확률지 이미지 표시</text><line x1="405" y1="1016" x2="75" y2="1016" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><g><rect x="0" y="1036" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="1068.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="75" dy="0">사용자</tspan></text></g><g><rect x="330" y="1036" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="405" y="1068.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="405" dy="0">Streamlit UI</tspan></text></g><g><rect x="662" y="1036" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="737" y="1068.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="737" dy="0">AgentExecutor</tspan></text></g><g><rect x="996" y="1036" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="1071" y="1068.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="1071" dy="0">Gemini (두뇌)</tspan></text></g><g><rect x="1196" y="1036" fill="#eaeaea" stroke="#666" width="171" height="65" rx="3" ry="3" class="actor"></rect><text x="1281.5" y="1068.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="1281.5" dy="0">Tool: run_full_analysis</tspan></text></g><g><rect x="1540.5" y="1036" fill="#eaeaea" stroke="#666" width="158" height="65" rx="3" ry="3" class="actor"></rect><text x="1619.5" y="1068.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="1619.5" dy="0">LangGraph Workflow</tspan></text></g></svg></pre>
</div>
</body>

</html>
